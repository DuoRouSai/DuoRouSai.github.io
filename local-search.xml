<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Vlist è™šæ‹Ÿç½‘æ ¼ç»„ä»¶ -- è§£è¯»ğŸ¤“</title>
    <link href="/2022/03/30/Vlist%20%E8%99%9A%E6%8B%9F%E7%BD%91%E6%A0%BC%E7%BB%84%E4%BB%B6%20--%20%E8%A7%A3%E8%AF%BB/"/>
    <url>/2022/03/30/Vlist%20%E8%99%9A%E6%8B%9F%E7%BD%91%E6%A0%BC%E7%BB%84%E4%BB%B6%20--%20%E8%A7%A3%E8%AF%BB/</url>
    
    <content type="html"><![CDATA[<h2 id="Vlist-è™šæ‹Ÿç½‘æ ¼ç»„ä»¶-â€“-è§£è¯»-ğŸ¤“"><a href="#Vlist-è™šæ‹Ÿç½‘æ ¼ç»„ä»¶-â€“-è§£è¯»-ğŸ¤“" class="headerlink" title="Vlist è™šæ‹Ÿç½‘æ ¼ç»„ä»¶ â€“ è§£è¯» ğŸ¤“"></a>Vlist è™šæ‹Ÿç½‘æ ¼ç»„ä»¶ â€“ è§£è¯» ğŸ¤“</h2><blockquote><p>å‰è¨€ï¼Œ å‰å‡ å¤©åˆšå®Œæˆä¸€ä¸ªéœ€æ±‚ï¼Œé•¿ï¼ˆç½‘æ ¼ï¼‰åˆ—è¡¨ä¼˜åŒ–ï¼Œä¸»è¦å‚è€ƒäº†è™šæ‹Ÿåˆ—è¡¨åŸç†ã€‚ä¸åŒçš„æ˜¯ï¼Œè™šæ‹Ÿåˆ—è¡¨æ˜¯ä¸€ç»´çº¿æ€§ä¸‹æ¥çš„ï¼Œè€Œè™šæ‹Ÿç½‘æ ¼æ˜¯äºŒç»´ï¼Œè¦è€ƒè™‘ä¸ä»…æ˜¯å±å¹•é«˜åº¦ï¼Œè¿˜è¦å±å¹•çš„å®½åº¦ã€‚ä¸åºŸè¯è¾½ï¼Œä¸Šå¹²è´§ã€‚</p></blockquote><h3 id="01-å…ˆæµ…ç”¨ä¸‹ï¼Œæ„Ÿå—ä¸‹å®ƒçš„ç¥å¥‡"><a href="#01-å…ˆæµ…ç”¨ä¸‹ï¼Œæ„Ÿå—ä¸‹å®ƒçš„ç¥å¥‡" class="headerlink" title="01 å…ˆæµ…ç”¨ä¸‹ï¼Œæ„Ÿå—ä¸‹å®ƒçš„ç¥å¥‡"></a>01 å…ˆæµ…ç”¨ä¸‹ï¼Œæ„Ÿå—ä¸‹å®ƒçš„ç¥å¥‡</h3><img src="https://s2.loli.net/2022/03/30/BteKUqVIXaC8JTk.gif" alt="è™šæ‹Ÿç½‘æ ¼gif" style="zoom: 50%;" /><blockquote><p>å¯ä»¥å¾ˆæ¸…æ™°çœ‹åˆ°ï¼Œéšç€é¡µé¢çš„æ»šåŠ¨ï¼ŒDOM ä¹Ÿæ˜¯è·Ÿç€æ¸²æŸ“çš„ï¼Œæå¤§å‡å°‘äº†æµè§ˆå™¨çš„å¼€é”€ï¼ˆå¡é¡¿æ˜¯å› ä¸ºå½•åˆ¶ gif,åªæœ‰ 10fpsğŸ˜… ï¼‰</p></blockquote><h3 id="02-è™šæ‹Ÿç½‘æ ¼å®è·µ"><a href="#02-è™šæ‹Ÿç½‘æ ¼å®è·µ" class="headerlink" title="02 è™šæ‹Ÿç½‘æ ¼å®è·µ"></a>02 è™šæ‹Ÿç½‘æ ¼å®è·µ</h3><blockquote><p>è™šæ‹Ÿç½‘æ ¼çš„åŸç†ï¼š å…¶å®å°±æ˜¯æ ¹æ®å¤–å±‚å®¹å™¨å°ºå¯¸ï¼Œè¿›è¡Œæ•°æ®åˆ†ç»„ï¼Œä»¥ç»„ä¸ºå•ä½æ¸²æŸ“æ•°æ®åˆ—ï¼ˆcolumn - nï¼‰ï¼Œç„¶åå‰©ä¸‹å°±æ˜¯å’Œè™šæ‹Ÿåˆ—è¡¨çš„åŸç†å¤§è‡´ä¸€æ ·å˜š</p></blockquote><p><img src="https://s2.loli.net/2022/03/30/WQPjyoCwNh9JE3n.png" alt="image-20220330181540874"></p><ol><li><p>é¦–å…ˆï¼Œæ˜ç¡®å‡ ä¸ª<strong>å˜é‡</strong></p><ul><li><p><strong>column</strong> ï¼šå†…å±‚å®¹å™¨çºµå‘æœ€å¤§å¯æ”¾ç½®çš„æ•°é‡</p></li><li><p><strong>row</strong>ï¼šå†…å±‚å®¹å™¨æ¨ªå‘æœ€å¤§å¯æ”¾ç½®çš„æ•°é‡</p></li><li><p><strong>itemWidth</strong>ï¼šå­ç»„ä»¶çš„ width</p></li><li><p><strong>itemHeight</strong>: å­ç»„ä»¶çš„ height</p></li><li><p><strong>startGroupIndex:</strong> æ¸²æŸ“ï¼Œå¼€å§‹æ¸²æŸ“çš„ä½ç½®ï¼ˆç»„ï¼‰</p></li><li><p><strong>endtGroupIndex:</strong> æ¸²æŸ“ï¼Œç»“æŸæ¸²æŸ“çš„ä½ç½®ï¼ˆç»„ï¼‰</p></li></ul></li><li><p>æˆ‘ä»¬åªå¯¹å¯è§†å±‚åšæ¸²æŸ“ï¼Œä½†æ˜¯ä¸ºäº†ä¿æŒæ•´ä¸ªå®¹å™¨åƒæ¸²æŸ“æ­£å¸¸é•¿åˆ—è¡¨ä¸€æ ·ï¼Œé‡Œé¢çš„å®¹å™¨è¿˜éœ€è¦ä¿æŒåŸæœ‰çš„é«˜åº¦ã€‚è¿™è¾¹æŠŠ <code>Html</code> è®¾è®¡è¿™æ ·</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¤–å±‚å®¹å™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;vListContainer&quot;</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- å†…å±‚å®¹å™¨ --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;phantomContent&quot;</span>&gt;</span><br>    ...<br>    <span class="hljs-comment">&lt;!-- column-1 --&gt;</span><br>    <span class="hljs-comment">&lt;!-- column-2 --&gt;</span><br>    <span class="hljs-comment">&lt;!-- column-3 --&gt;</span><br>    ....<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li><li><p>é€šè¿‡è®¡ç®—<code>_.chunk(itemsArray, column )</code>ï¼Œæ‹¿åˆ°åˆ†ç»„çš„æ•°ç»„ <code>groupItems</code></p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// groupItems äºŒç»´æ•°ç»„</span><br>;[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>][(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)][(<span class="hljs-number">7</span>, <span class="hljs-number">8</span>)]]<br></code></pre></div></td></tr></table></figure></li><li><p>å†é€šè¿‡ç›‘å¬ <code>å¤–å±‚å®¹å™¨ onscroll</code> è®¡ç®—å‡º <code>startGroupIndex</code> å’Œ <code>endtGroupIndex</code></p></li><li><p>é€šè¿‡ <code>renderDisplayContent</code> æ¸²æŸ“åˆ°é¡µé¢ä¸Š</p></li><li><p>å¦å¤–å½“é¡µé¢å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šè¿‡ç›‘å¬<code>resize</code> äº‹ä»¶ï¼ˆcomputeGridSizeï¼‰æ›´æ–° <code>column</code>ï¼Œ<code>row</code>ï¼Œ<code>groupItems</code>ï¼Œä»¥é‡æ–°æ¸²æŸ“</p></li></ol><h3 id="03-è™šæ‹Ÿç½‘æ ¼ç»„ä»¶æºç ç»†èŠ‚"><a href="#03-è™šæ‹Ÿç½‘æ ¼ç»„ä»¶æºç ç»†èŠ‚" class="headerlink" title="03 è™šæ‹Ÿç½‘æ ¼ç»„ä»¶æºç ç»†èŠ‚"></a>03 è™šæ‹Ÿç½‘æ ¼ç»„ä»¶æºç ç»†èŠ‚</h3><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState, useCallback, useMemo, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> useThrottle <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;hooks/useThrottle&#x27;</span><br><span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;lodash&#x27;</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">VListStyle</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./style&#x27;</span><br><span class="hljs-keyword">import</span> &#123; useRef &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>: è™šæ‹Ÿåˆ—è¡¨</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">*</span>&#125; containerRef å¤–å®¹å™¨ref</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">*</span>&#125; itemsArray åˆ—è¡¨æ•°æ®</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">*</span>&#125; childrenå­ç»„ä»¶</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">*</span>&#125; containerInitHeight å¤–å®¹å™¨åˆå§‹é«˜åº¦</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">*</span>&#125; containeInitWidth å¤–å®¹å™¨åˆå§‹å®½åº¦</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">*</span>&#125; itemHeight å­ç»„ä»¶é«˜åº¦</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">*</span>&#125; itemWidthå­ç»„ä»¶å®½åº¦</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">*</span>&#125; BufferSize åˆ—è¡¨ç¼“å†²åŒºå¤§å°</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span> &#123;<span class="hljs-type">*</span>&#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">VList</span>(<span class="hljs-params">&#123;</span><br><span class="hljs-params">  containerRef,</span><br><span class="hljs-params">  itemsArray = [],</span><br><span class="hljs-params">  children,</span><br><span class="hljs-params">  containerInitHeight,</span><br><span class="hljs-params">  containeInitWidth,</span><br><span class="hljs-params">  itemHeight,</span><br><span class="hljs-params">  itemWidth,</span><br><span class="hljs-params">  BufferSize = <span class="hljs-number">4</span>,</span><br><span class="hljs-params">&#125;</span>) &#123;<br>  <span class="hljs-comment">// å†…å±‚å®¹å™¨çš„ ref</span><br>  <span class="hljs-keyword">const</span> phantomContentRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>)<br><br>  <span class="hljs-comment">// å†…å±‚å®¹å™¨çºµå‘æœ€å¤§å¯æ”¾ç½®çš„æ•°é‡</span><br>  <span class="hljs-keyword">const</span> [column, setColumn] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span><br>    <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(containeInitWidth / itemWidth)<br>  )<br><br>  <span class="hljs-comment">// å†…å±‚å®¹å™¨æ¨ªå‘æœ€å¤§å¯æ”¾ç½®çš„æ•°é‡</span><br>  <span class="hljs-keyword">const</span> [row, setRow] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span><br>    <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(containerInitHeight / itemHeight)<br>  )<br><br>  <span class="hljs-comment">// åˆ—è¡¨æ•°æ®åˆ†ç»„ï¼ŒæŒ‰ç…§columnåˆ†ç»„</span><br>  <span class="hljs-keyword">const</span> [groupItems, setGroupItems] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span><br>    _.<span class="hljs-title function_">chunk</span>(itemsArray, column)<br>  )<br><br>  <span class="hljs-comment">// æ¸²æŸ“ï¼Œå¼€å§‹æ¸²æŸ“çš„ä½ç½®ï¼ˆç»„ï¼‰</span><br>  <span class="hljs-keyword">const</span> [startGroupIndex, setStartGroupIndex] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)<br><br>  <span class="hljs-comment">// æ¸²æŸ“ï¼Œç»“æŸæ¸²æŸ“çš„ä½ç½®ï¼ˆç»„ï¼‰</span><br>  <span class="hljs-keyword">const</span> [endtGroupIndex, setEndGroupIndex] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(row * column, groupItems.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>)<br>  &#125;)<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@description</span>: æ»šåŠ¨æ¡ onscrolläº‹ä»¶ï¼Œè®¡ç®— startGroupIndexï¼Œ endtGroupIndex</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span></span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-keyword">const</span> onScrollListening = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-comment">// å†…å±‚å®¹å™¨æ»šåŠ¨åç§»é‡</span><br>    <span class="hljs-keyword">const</span> &#123; scrollTop &#125; = containerRef.<span class="hljs-property">current</span><br><br>    <span class="hljs-comment">// è®¡ç®—æ»šåŠ¨åˆ°çš„ç»„ç´¢å¼•å·</span><br>    <span class="hljs-keyword">const</span> currentstartGroupIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(scrollTop / itemHeight)<br><br>    <span class="hljs-comment">// å½“å‰æ»šåŠ¨åˆ°çš„ç»„ç´¢å¼•å· ä¸ startGroupIndex ä¸åŒæ—¶ï¼Œæ‰æ›´æ–° startGroupIndexï¼Œ endtGroupIndex</span><br>    <span class="hljs-keyword">if</span> (currentstartGroupIndex !== startGroupIndex) &#123;<br>      <span class="hljs-title function_">setStartGroupIndex</span>(currentstartGroupIndex)<br>      <span class="hljs-title function_">setEndGroupIndex</span>(<br>        <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(startGroupIndex + row + <span class="hljs-title class_">BufferSize</span>, groupItems.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>)<br>      )<br>    &#125;<br>  &#125;, [itemHeight, startGroupIndex, containerRef, <span class="hljs-title class_">BufferSize</span>, groupItems, row])<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@description</span>: ç”¨äºé€šè¿‡ startGroupIndexï¼Œ endtGroupIndex éå† groupItems æ¸²æŸ“åˆ°é¡µé¢ä¸Š</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span></span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-keyword">const</span> renderDisplayContent = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-comment">// itemsArray æ•°æ®ä¸ºç©ºï¼Œä¸æ¸²æŸ“</span><br>    <span class="hljs-keyword">if</span> (!_.<span class="hljs-title function_">isEmpty</span>(itemsArray)) &#123;<br>      <span class="hljs-comment">// å­˜æ”¾éœ€è¦éœ€è¦æ¸²æŸ“DOM æ•°ç»„</span><br>      <span class="hljs-keyword">const</span> content = []<br><br>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = startGroupIndex; i &lt;= endtGroupIndex; i++) &#123;<br>        content.<span class="hljs-title function_">push</span>(<br>          <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;i&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;phantomItem&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">gridTemplateColumns:</span> `<span class="hljs-attr">repeat</span>(<span class="hljs-attr">auto-fill</span>, $&#123;<span class="hljs-attr">itemWidth</span>&#125;<span class="hljs-attr">px</span>)`,</span></span><br><span class="hljs-tag"><span class="language-xml">            &#125;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">          &gt;</span></span><br><span class="language-xml">            &#123;</span><br><span class="language-xml">              // éå† groupItems</span><br><span class="language-xml">              groupItems[i].map((item, j) =&gt; children(item, `$&#123;i&#125;-$&#123;j&#125; `))</span><br><span class="language-xml">            &#125;</span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>        )<br>      &#125;<br>      <span class="hljs-keyword">return</span> content<br>    &#125;<br>  &#125;, [<br>    startGroupIndex,<br>    endtGroupIndex,<br>    groupItems,<br>    children,<br>    itemsArray,<br>    itemWidth,<br>  ])<br><br>  <span class="hljs-comment">// ç»™ containerBobyRef åŠ ä¸Š onscroll äº‹ä»¶</span><br>  containerRef.<span class="hljs-property">current</span>.<span class="hljs-property">onscroll</span> = <span class="hljs-title function_">useThrottle</span>(onScrollListening, <span class="hljs-number">100</span>, [])<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@description</span>: ç”¨äºç›‘å¬å¤–å±‚å®¹å™¨çš„å¯è§†åŒºåŸŸå¤§å°å˜åŒ–</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">*</span>&#125;</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> &#123;<span class="hljs-type">*</span>&#125;</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-keyword">const</span> computeGridSize = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-comment">// å¤–å±‚å®¹å™¨å½“å‰å¯è§†é«˜åº¦</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-title class_">Height</span> = containerRef.<span class="hljs-property">current</span>.<span class="hljs-property">clientHeight</span><br><br>    <span class="hljs-comment">// å¤–å±‚å®¹å™¨å½“å‰å¯è§†å®½åº¦</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-title class_">Width</span> = containerRef.<span class="hljs-property">current</span>.<span class="hljs-property">clientWidth</span><br><br>    <span class="hljs-comment">// å†…å±‚å®¹å™¨çºµå‘å½“å‰æœ€å¤§å¯æ”¾ç½®çš„æ•°é‡</span><br>    <span class="hljs-keyword">const</span> currentColumn = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Width</span> / itemWidth)<br><br>    <span class="hljs-comment">// å†…å±‚å®¹å™¨æ¨ªå‘å½“å‰æœ€å¤§å¯æ”¾ç½®çš„æ•°é‡</span><br>    <span class="hljs-keyword">const</span> currentRow = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(<span class="hljs-title class_">Height</span> / itemHeight)<br><br>    <span class="hljs-comment">// ä¸ç›¸åŒæ—¶ï¼Œè¯´æ˜é¡µé¢å‘ç”Ÿå˜åŒ–ï¼Œæ›´æ–° columnï¼Œ row</span><br>    <span class="hljs-keyword">if</span> (currentColumn !== column || currentRow !== row) &#123;<br>      <span class="hljs-title function_">setColumn</span>(currentColumn)<br>      <span class="hljs-title function_">setRow</span>(currentRow)<br>      <span class="hljs-title function_">setGroupItems</span>(_.<span class="hljs-title function_">chunk</span>(itemsArray, currentColumn))<br>    &#125;<br>  &#125;, [containerRef, itemHeight, itemWidth, column, row, itemsArray])<br><br>  <span class="hljs-comment">// ç›‘å¬å¤–å±‚å®¹å™¨çš„å¯è§†åŒºåŸŸå¤§å°å˜åŒ–</span><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;resize&#x27;</span>, computeGridSize)<br>    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&#x27;resize&#x27;</span>, computeGridSize)<br>  &#125;, [computeGridSize])<br><br>  <span class="hljs-comment">// height: `$&#123;groupItems.length * itemHeight&#125;px`</span><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">VListStyle</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;phantomContent&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;phantomContentRef&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">marginTop:</span> `$&#123;<span class="hljs-attr">startGroupIndex</span> * <span class="hljs-attr">itemHeight</span>&#125;<span class="hljs-attr">px</span>`,</span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">marginBottom:</span> `$&#123;</span></span><br><span class="hljs-tag"><span class="language-xml">            (<span class="hljs-attr">groupItems.length</span> <span class="hljs-attr">-</span> <span class="hljs-attr">endtGroupIndex</span> <span class="hljs-attr">-</span> <span class="hljs-attr">1</span>) * <span class="hljs-attr">itemHeight</span></span></span><br><span class="hljs-tag"><span class="language-xml">          &#125;<span class="hljs-attr">px</span>`,</span></span><br><span class="hljs-tag"><span class="language-xml">        &#125;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">      &gt;</span></span><br><span class="language-xml">        &#123;renderDisplayContent&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">VListStyle</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">VList</span><br></code></pre></div></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>React</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è™šæ‹Ÿåˆ—è¡¨</tag>
      
      <tag>è™šæ‹Ÿç½‘æ ¼</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Typora å°å¦™æ‹› -- å›¾ç‰‡æœåŠ¡å™¨ğŸ˜Š</title>
    <link href="/2022/03/28/Typora%20%E5%B0%8F%E5%A6%99%E6%8B%9B%20--%20%E5%9B%BE%E7%89%87%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <url>/2022/03/28/Typora%20%E5%B0%8F%E5%A6%99%E6%8B%9B%20--%20%E5%9B%BE%E7%89%87%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="Typora-å°å¦™æ‹›-â€“-å›¾ç‰‡æœåŠ¡å™¨-ğŸ˜Š"><a href="#Typora-å°å¦™æ‹›-â€“-å›¾ç‰‡æœåŠ¡å™¨-ğŸ˜Š" class="headerlink" title="Typora å°å¦™æ‹› â€“ å›¾ç‰‡æœåŠ¡å™¨ ğŸ˜Š"></a>Typora å°å¦™æ‹› â€“ å›¾ç‰‡æœåŠ¡å™¨ ğŸ˜Š</h2><h3 id="01-å‰è¨€"><a href="#01-å‰è¨€" class="headerlink" title="01 å‰è¨€"></a>01 å‰è¨€</h3><p><code>Typora</code> æ˜¯å½“ä»Šç¨‹åºçŒ¿ç¬”è®°åˆ©å™¨ï¼Œå½“æˆ‘ä»¬éœ€è¦æ’å›¾ç‰‡åœ¨ç¬”è®°ä¸­ï¼Œä¿å­˜å…¶å®æ˜¯æœ¬åœ°å›¾ç‰‡ã€‚ä¸€æ—¦ä½ ä¸Šä¼ åˆ°è‡ªå·±æ’­å®¢ä¸Šé¢ï¼Œå°±ä¼šå‘ç°å›¾ç‰‡æ˜¾ç¤ºä¸å‡ºæ¥ï¼Œéå¸¸éº»çƒ¦ã€‚è¿™è¾¹æ•™å¤§å®¶é…ç½®ä¸€ä¸ªå›¾ç‰‡æœåŠ¡å™¨ï¼Œä½¿ç”¨ <code>sm.ms</code> ä½œä¸ºå›¾åºŠ</p><blockquote><p>Typora V0.11.17</p></blockquote><h3 id="02-æ•™ç¨‹"><a href="#02-æ•™ç¨‹" class="headerlink" title="02 æ•™ç¨‹"></a>02 æ•™ç¨‹</h3><p>é€‰æ‹© sm.ms ä½œä¸ºå›¾åºŠ,å®˜ç½‘åœ°å€ï¼š<a href="https://sm.ms/">https://sm.ms</a></p><p>ç‰¹ç‚¹ï¼šæ°¸ä¹…å­˜å‚¨å…æ³¨å†Œï¼Œå›¾ç‰‡é“¾æ¥æ”¯æŒ httpsï¼Œå¯ä»¥åˆ é™¤ä¸Šä¼ çš„å›¾ç‰‡ï¼Œæä¾›å¤šç§å›¾ç‰‡é“¾æ¥æ ¼å¼ï¼Œç›®å‰å…è´¹ç”¨æˆ·æ— æ³•ä½¿ç”¨é¦™æ¸¯èŠ‚ç‚¹å› æ­¤é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œæœ‰æ—¶å€™å¯èƒ½ä¸Šä¼ å¤±è´¥ã€‚</p><p>å›¾ç‰‡ä¸Šä¼ é™åˆ¶ï¼šæ¯ä¸ªå›¾ç‰‡æœ€å¤§ 5Mï¼Œæ¯æ¬¡æœ€å¤šä¸Šä¼  10 å¼ </p><ol><li><p>æ³¨å†Œæˆ–ç™»é™† sm.ms</p><p>â€‹ <a href="https://sm.ms/login">https://sm.ms/login</a></p></li><li><p>ç”Ÿæˆ token</p><p><img src="https://s2.loli.net/2022/03/17/Ym7XfbrlZVjdEhv.png" alt="image-20220317225046857"></p></li><li><p>é…ç½® token</p><p>è¿›å…¥<a href="https://sm.ms/home/apitoken">API Access - SM.MS | Dashboard</a></p><p><img src="https://s2.loli.net/2022/03/17/m4aX9PZvYwbc5lS.png" alt="image-20220317225253731"></p><p>å›åˆ° Typora é…ç½®</p><p><img src="C:\Users\DuoRouSai\AppData\Roaming\Typora\typora-user-images\image-20220317225444609.png" alt="image-20220317225444609"></p><p>æŒ‰ç…§å›¾ç‰‡é¡ºåºï¼Œé…ç½® config</p><p><img src="https://s2.loli.net/2022/03/17/TdfZnEJyoaIXHVm.png" alt="image-20220317225658734"></p><figure class="highlight json"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;picBed&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;uploader&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;smms&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">//ä¼ å›¾åºŠä¸º SM.MS,</span><br>    <span class="hljs-attr">&quot;smms&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxxxxxxxxxxxxxxxxxxxx&quot;</span> <span class="hljs-comment">//è¿™é‡Œé¢çš„tokenæ¢æˆåˆšåˆšç”Ÿæˆçš„ sm.ms çš„token</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;picgoPlugins&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></div></td></tr></table></figure><p>æ³¨æ„ä¿®æ”¹åé‡å¯è½¯ä»¶ !!!</p></li></ol><p><strong>æ•ˆæœé¢„è§ˆ</strong>:</p><p>å°†å›¾ç‰‡å¤åˆ¶åˆ° Typora ,å°±è‡ªåŠ¨ä¸Šä¼ </p><p><img src="https://s2.loli.net/2022/03/17/xMtPjqCZ7mfJiAU.png" alt="image-20220317230130170"></p><p><strong>å¤§åŠŸå‘Šæˆï¼ï¼ï¼</strong> ğŸ’•</p><p><img src="../AppData/Roaming/Typora/typora-user-images/image-20220318141602372.png" alt="image-20220318141602372"></p>]]></content>
    
    
    <categories>
      
      <category>Typora</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>stopPropagation å’Œ stopImmediatePropagationåŒºåˆ«âœŒï¸</title>
    <link href="/2022/03/28/stopPropagation%20%E5%92%8C%20stopImmediatePropagation%E5%8C%BA%E5%88%AB/"/>
    <url>/2022/03/28/stopPropagation%20%E5%92%8C%20stopImmediatePropagation%E5%8C%BA%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<h1 id="stopPropagation-å’Œ-stopImmediatePropagation-åŒºåˆ«-âœŒï¸"><a href="#stopPropagation-å’Œ-stopImmediatePropagation-åŒºåˆ«-âœŒï¸" class="headerlink" title="stopPropagation å’Œ stopImmediatePropagation åŒºåˆ« âœŒï¸"></a>stopPropagation å’Œ stopImmediatePropagation åŒºåˆ« âœŒï¸</h1><h3 id="01-åè¯è§£é‡Š"><a href="#01-åè¯è§£é‡Š" class="headerlink" title="01 åè¯è§£é‡Š"></a>01 åè¯è§£é‡Š</h3><p>âœ”ï¸<strong>event.stopPropagation ï¼š</strong>æ¯”è¾ƒå¸¸è§ï¼Œç”¨äºåœæ­¢å†’æ³¡ï¼Œé˜»æ­¢äº‹ä»¶åœ¨ DOM ä¸­ç»§ç»­å†’æ³¡ã€‚</p><p>âœ”ï¸<strong>event.stopImmediatePropagation:</strong> é˜»æ­¢ click äº‹ä»¶å†’æ³¡,å¹¶ä¸”é˜»æ­¢ p å…ƒç´ ä¸Šç»‘å®šçš„å…¶ä»– click äº‹ä»¶çš„äº‹ä»¶ç›‘å¬å‡½æ•°çš„æ‰§è¡Œ.</p><h3 id="02-å®è·µå°ä¾‹å­"><a href="#02-å®è·µå°ä¾‹å­" class="headerlink" title="02 å®è·µå°ä¾‹å­"></a>02 å®è·µå°ä¾‹å­</h3><p>ğŸ’» åŠ¨åŠ¨å°æ‰‹å®è·µä¸‹,æœ‰åŠ©äºç†è§£å“¦â€¦</p><p>// æ‘˜è‡ª MDN</p><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">      <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">150px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ccf</span>;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">      <span class="hljs-selector-tag">div</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">150px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#cfc</span>;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>paragraph<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> p = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;p&#x27;</span>)</span><br><span class="language-javascript">      p.<span class="hljs-title function_">addEventListener</span>(</span><br><span class="language-javascript">        <span class="hljs-string">&#x27;click&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">          <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;æˆ‘æ˜¯på…ƒç´ ä¸Šè¢«ç»‘å®šçš„ç¬¬ä¸€ä¸ªç›‘å¬å‡½æ•°&#x27;</span>)</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-literal">false</span></span><br><span class="language-javascript">      )</span><br><span class="language-javascript"></span><br><span class="language-javascript">      p.<span class="hljs-title function_">addEventListener</span>(</span><br><span class="language-javascript">        <span class="hljs-string">&#x27;click&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">          <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;æˆ‘æ˜¯på…ƒç´ ä¸Šè¢«ç»‘å®šçš„ç¬¬äºŒä¸ªç›‘å¬å‡½æ•°&#x27;</span>)</span><br><span class="language-javascript">          event.<span class="hljs-title function_">stopImmediatePropagation</span>()</span><br><span class="language-javascript">          <span class="hljs-comment">// æ‰§è¡ŒstopImmediatePropagationæ–¹æ³•,é˜»æ­¢clickäº‹ä»¶å†’æ³¡,å¹¶ä¸”é˜»æ­¢på…ƒç´ ä¸Šç»‘å®šçš„å…¶ä»–clickäº‹ä»¶çš„äº‹ä»¶ç›‘å¬å‡½æ•°çš„æ‰§è¡Œ.</span></span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-literal">false</span></span><br><span class="language-javascript">      )</span><br><span class="language-javascript"></span><br><span class="language-javascript">      p.<span class="hljs-title function_">addEventListener</span>(</span><br><span class="language-javascript">        <span class="hljs-string">&#x27;click&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">          <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;æˆ‘æ˜¯på…ƒç´ ä¸Šè¢«ç»‘å®šçš„ç¬¬ä¸‰ä¸ªç›‘å¬å‡½æ•°&#x27;</span>)</span><br><span class="language-javascript">          <span class="hljs-comment">// è¯¥ç›‘å¬å‡½æ•°æ’åœ¨ä¸Šä¸ªå‡½æ•°åé¢ï¼Œè¯¥å‡½æ•°ä¸ä¼šè¢«æ‰§è¡Œ</span></span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-literal">false</span></span><br><span class="language-javascript">      )</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;div&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(</span><br><span class="language-javascript">        <span class="hljs-string">&#x27;click&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">          <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;æˆ‘æ˜¯divå…ƒç´ ,æˆ‘æ˜¯på…ƒç´ çš„ä¸Šå±‚å…ƒç´ &#x27;</span>)</span><br><span class="language-javascript">          <span class="hljs-comment">// på…ƒç´ çš„clickäº‹ä»¶æ²¡æœ‰å‘ä¸Šå†’æ³¡ï¼Œè¯¥å‡½æ•°ä¸ä¼šè¢«æ‰§è¡Œ</span></span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-literal">false</span></span><br><span class="language-javascript">      )</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></div></td></tr></table></figure><h3 id="03-é¡¹ç›®åº”ç”¨åœºæ™¯"><a href="#03-é¡¹ç›®åº”ç”¨åœºæ™¯" class="headerlink" title="03 é¡¹ç›®åº”ç”¨åœºæ™¯"></a>03 é¡¹ç›®åº”ç”¨åœºæ™¯</h3><p><strong>åœºæ™¯ï¼š</strong></p><img src="https://s2.loli.net/2022/03/18/Dw9e2YEbGOsHrTB.png" alt="image-20220318184706337" style="zoom: 50%;" /><p>éœ€æ±‚å°±æ˜¯ç‚¹å‡» <code>â€œESCâ€</code> å…³é—­æ–°å»ºçš„é‚£ä¸ªæ¡†æ¡†ï¼Œ<code>event.stopImmediatePropagation()</code> å¯ä»¥é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Œä»¥åŠé˜»æ­¢å…¶ä»–çš„ç»‘å®šäº‹ä»¶çš„æ‰§è¡Œã€‚</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>React é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ– -- react-window</title>
    <link href="/2022/03/28/React%20%E9%95%BF%E5%88%97%E8%A1%A8%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%20--%20react-window/"/>
    <url>/2022/03/28/React%20%E9%95%BF%E5%88%97%E8%A1%A8%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%20--%20react-window/</url>
    
    <content type="html"><![CDATA[<h2 id="React-é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–-â€“-react-window"><a href="#React-é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–-â€“-react-window" class="headerlink" title="React é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ– â€“ react-window"></a>React é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ– â€“ react-window</h2><blockquote><p>å‡å¦‚æœ‰ä¸€å¤©ï¼Œä½ é‡åˆ°ä¸€ä¸ªéå¸¸å˜æ€çš„éœ€æ±‚æˆ–è€…ä¸€ä¸ªä¸ä¼šåˆ†é¡µçš„åç«¯ â€“ å‰ç«¯æ‹¿åˆ° 1W+æ¡æ•°æ®æ—¶ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿæµè§ˆå™¨æ€§èƒ½æ˜¯æœ‰é™çš„çš„ï¼ŒæŠŠ 1w+æ¡æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ï¼Œéå¸¸å®¹æ˜“é€ æˆé¡µé¢å¡é¡¿ï¼Œå¯¼è‡´ç”¨æˆ·ä½“éªŒä¸ä½³ã€‚ğŸ¤·â€â™€ï¸</p></blockquote><h3 id="01-å¸¸è§çš„è§£å†³æ–¹æ¡ˆ"><a href="#01-å¸¸è§çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="01 å¸¸è§çš„è§£å†³æ–¹æ¡ˆ"></a>01 å¸¸è§çš„è§£å†³æ–¹æ¡ˆ</h3><p>1.æ‡’åŠ è½½</p><p>æ–¹å¼ï¼šé€šè¿‡ç›‘å¬åˆ—è¡¨çš„æ»šåŠ¨ï¼Œæ¯å½“ç”¨æˆ·æ»šåŠ¨åˆ°åˆ—è¡¨åº•éƒ¨çš„æ—¶å€™ï¼Œè¿›è¡ŒåŠ è½½åé¢çš„æ•°æ®è¿½åŠ æ¸²æŸ“åˆ° DOM ä¸Šã€‚</p><p>ç¼ºç‚¹ï¼šå½“ç”¨æˆ·ä¸€ç›´å‘ä¸‹åˆ’ï¼Œé¡µé¢ä¾ç„¶ä¼šäº§ç”Ÿå¤§é‡ DOM å…ƒç´ ï¼Œå ç”¨å†…å­˜è¿‡å¤šï¼Œå¯¼è‡´é¡µé¢å¡é¡¿ã€‚</p><p>2.è™šæ‹Ÿåˆ—è¡¨</p><p>æ–¹å¼ï¼šå…¶æ ¸å¿ƒæ€è·¯ï¼Œæ¸²æŸ“é•¿åˆ—è¡¨æ—¶ï¼Œæ¯æ¬¡åªæ¸²æŸ“å¯è§†åŒºåŸŸçš„åˆ—è¡¨æ•°ã€‚</p><h3 id="02-è™šæ‹Ÿåˆ—è¡¨æŠ€æœ¯"><a href="#02-è™šæ‹Ÿåˆ—è¡¨æŠ€æœ¯" class="headerlink" title="02 è™šæ‹Ÿåˆ—è¡¨æŠ€æœ¯"></a>02 è™šæ‹Ÿåˆ—è¡¨æŠ€æœ¯</h3><blockquote><p>å¸¸è§è™šæ‹Ÿåˆ—è¡¨æŠ€æœ¯ react-window å’Œ react-virtualized ï¼Œæœ‰ä»€ä¹ˆä¸åŒå‘¢?</p></blockquote><p>è¿™ä¸¤ä¸ªåº“éƒ½å‡ºè‡ªä¸€ä¸ªä½œè€…ï¼Œ<code>react-window</code> æ˜¯å¯¹ <code>react-virtualized</code> çš„é‡å†™ï¼Œè‡³äºä¸ºå•¥é‡å†™å‘¢ï¼Ÿä½œè€…ç»™å‡ºçš„è§£é‡Šæ˜¯ï¼Œ<code>react-virtualized</code> è€ƒè™‘æƒ…å†µå¤ªå¤šï¼Œå¢åŠ äº†å¤ªå¤šçš„éåŸºæœ¬åŠŸèƒ½å’Œç»„ä»¶ã€‚åˆ é™¤è¿™äº›åŠŸèƒ½ä¼šå¯¼è‡´ä¹‹å‰ä½¿ç”¨çš„å¼€å‘è€…ç—›è‹¦é¢å…· ğŸ¤¯ï¼Œæ‰€ä»¥å°±é‡å†™äº†ã€‚</p><p><a href="https://github.com/bvaughn/react-window">react-window</a> æ›´åŠ å…³æ³¨ <strong>smaller</strong>1 and <strong>faster</strong>ã€‚</p><h3 id="03-react-window-å°è¯•"><a href="#03-react-window-å°è¯•" class="headerlink" title="03 react-window å°è¯•"></a>03 react-window å°è¯•</h3><p>Hereâ€™s a <a href="https://codesandbox.io/s/bvaughn-react-window-fixed-size-list-vertical-forked-7xp7qn?file=/index.js:211-216">CodeSandbox</a></p><p>ä¸Šé¢è¿™å—æ˜¯æ¯”è¾ƒåŸºæœ¬çš„ä½¿ç”¨ï¼Œæˆ‘æ‰“ç®—å‚è€ƒ <code>react-window</code> çš„åŸç†ï¼Œå»å®ç°è¿™ä¸ªéœ€æ±‚ã€‚</p><p><img src="https://s2.loli.net/2022/03/21/t48I7q9rUbwOYEK.png" alt="image-20220321182310892"></p><p>ä»Šå¤©æš‚æ—¶è¿˜æ²¡ç ”ç©¶é€ï¼Œæ˜å¤©å®è·µä¸‹å†è¿›è¡Œè¡¥å……ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>React</category>
      
    </categories>
    
    
    <tags>
      
      <tag>React</tag>
      
      <tag>æ€§èƒ½ä¼˜åŒ–</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>useCallback å’Œ useMemo çš„åŒºåˆ«</title>
    <link href="/2022/03/28/useCallback%20%E5%92%8C%20useMemo%20%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F/"/>
    <url>/2022/03/28/useCallback%20%E5%92%8C%20useMemo%20%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F/</url>
    
    <content type="html"><![CDATA[<h2 id="useCallback-å’Œ-useMemo-çš„åŒºåˆ«"><a href="#useCallback-å’Œ-useMemo-çš„åŒºåˆ«" class="headerlink" title="useCallback å’Œ useMemo çš„åŒºåˆ«"></a>useCallback å’Œ useMemo çš„åŒºåˆ«</h2><blockquote><p>å‰è¨€ï¼Œåˆšçœ‹å®˜æ–¹æ–‡æ¡£çš„æ—¶å€™ã€‚ä¹Ÿè®¸ä¼šè§‰å¾—ä»–ä»¬å¾ˆåƒï¼Œæˆ–è€…è®¤ä¸º<code>useCallback</code> æ˜¯ <code>useMemo</code>çš„è¯­æ³•ç³– ğŸ¬</p><p>å…¶å®ä¸ç„¶ï¼Œä»–ä»¬è™½ç„¶è¯´éƒ½æ˜¯ â€œæ€§èƒ½ä¼˜åŒ–â€ çš„æ‰‹æ®µï¼Œä»–ä»¬çš„ç”¨æ³•å’Œå…³æ³¨å±‚é¢è¿˜æ˜¯æœ‰ç‚¹ä¸ä¸€æ ·</p></blockquote><h3 id="01-useCallback"><a href="#01-useCallback" class="headerlink" title="01 useCallback"></a>01 useCallback</h3><p><strong>ç”¨æ³•ï¼š</strong></p><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> memoizedCallback = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-title function_">doSomething</span>(a, b)<br>&#125;, [a, b])<br></code></pre></div></td></tr></table></figure><p><code>useCallback(fn, deps)</code> ç›¸å½“äº <code>useMemo(() =&gt; fn, deps)</code></p><p><strong>å…³æ³¨ï¼š</strong></p><p><code>useCallback</code> ä¸€èˆ¬ç”¨äºå‡½æ•°æ›´æ–°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„æ–¹æ³•</p><h3 id="02-useMemo"><a href="#02-useMemo" class="headerlink" title="02 useMemo"></a>02 useMemo</h3><p><strong>ç”¨æ³•ï¼š</strong></p><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> memoizedValue = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">computeExpensiveValue</span>(a, b), [a, b])<br></code></pre></div></td></tr></table></figure><p><strong>å…³æ³¨ï¼š</strong></p><p><code>useMemo</code> ä¸€èˆ¬ç”¨äºç»„ä»¶ä¸­å˜é‡ï¼Œè¿”å›å˜é‡å€¼</p>]]></content>
    
    
    <categories>
      
      <category>hook</category>
      
    </categories>
    
    
    <tags>
      
      <tag>React</tag>
      
      <tag>hook</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è‡ªå®šä¹‰ Hook å’Œ å°è£…ç»„ä»¶</title>
    <link href="/2022/03/28/%E8%87%AA%E5%AE%9A%E4%B9%89%20hooks%20%E5%92%8C%20%E5%B0%81%E8%A3%85%E7%BB%84%E4%BB%B6/"/>
    <url>/2022/03/28/%E8%87%AA%E5%AE%9A%E4%B9%89%20hooks%20%E5%92%8C%20%E5%B0%81%E8%A3%85%E7%BB%84%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="è‡ªå®šä¹‰-Hook-å’Œ-å°è£…ç»„ä»¶"><a href="#è‡ªå®šä¹‰-Hook-å’Œ-å°è£…ç»„ä»¶" class="headerlink" title="è‡ªå®šä¹‰ Hook å’Œ å°è£…ç»„ä»¶"></a>è‡ªå®šä¹‰ Hook å’Œ å°è£…ç»„ä»¶</h2><blockquote><p>å‰è¨€ï¼š</p><p><em>Hook</em> æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚</p></blockquote><h3 id="01-è‡ªå®šä¹‰-Hook"><a href="#01-è‡ªå®šä¹‰-Hook" class="headerlink" title="01 è‡ªå®šä¹‰ Hook"></a>01 è‡ªå®šä¹‰ Hook</h3><blockquote><p>é€šè¿‡è‡ªå®šä¹‰ Hookï¼Œå¯ä»¥å°†ç»„ä»¶é€»è¾‘æå–åˆ°å¯é‡ç”¨çš„å‡½æ•°ä¸­ã€‚ä½¿å¾—ä¸€äº›å…¬å…±é€»è¾‘å¯ä»¥ä»é¡¹ç›®ä¸­è§£è€¦å‡ºæ¥ï¼Œä¸ä»…é¡¹ç›®å…¶ä»–åœ°æ–¹ä¸­ä½¿ç”¨ï¼Œè¿˜ä»¥æä¾›ç»™ç¤¾åŒº ğŸ’»ã€‚</p></blockquote><p>ä¸€èˆ¬ä»¥ â€œ<code>use</code>â€ å‘½åå¼€å¤´ï¼Œè¿™ä¸ªæ˜¯çº¦æŸã€‚ä¹Ÿæ˜¯ä¸ºäº†è®© React å¸®æˆ‘ä»¬æ›´å¥½åœ°æ£€æŸ¥æ˜¯å¦ç¬¦åˆ <code>Hook</code> è§„åˆ™ã€‚</p><p>ä¸€èˆ¬æ”¾åœ¨é¡¹ç›®çš„ <code>hooks</code> æ–‡ä»¶ä¸‹</p><p>âœï¸<strong>å…³äºè‡ªå®šä¹‰ <code>Hook</code> çš„å°è£…ï¼š</strong></p><p>a.ä¸é¡¹ç›®é€»è¾‘è§£è€¦ï¼ŒæŠ½ç¦»å‡ºå…¬å…±é€»è¾‘</p><p>b.å°½é‡ä¸è¶Šç•Œã€ä¸æ¶‰åŠåˆ° UIï¼Œåªå…³æ³¨é€»è¾‘</p><p>c.å¤–éƒ¨ä½¿ç”¨ï¼Œåšåˆ°åªè€ƒè™‘ <code>è¾“å…¥</code> å’Œ <code>è¾“å‡º </code>, æ— å…³ä¹å†…éƒ¨å®ç°</p><p>æ¨èä¸€ä¸ªå¼ºå¤§çš„ <strong>hooks åº“ â€”</strong><a href="https://ahooks.js.org/"><strong>ahook</strong></a></p><h3 id="02-å°è£…ç»„ä»¶"><a href="#02-å°è£…ç»„ä»¶" class="headerlink" title="02 å°è£…ç»„ä»¶"></a>02 å°è£…ç»„ä»¶</h3><blockquote><p>å°è£…ç»„ä»¶ï¼Œå®ƒå’Œè‡ªå®šä¹‰ Hookï¼Œéƒ½ç”¨åˆ°å‡½æ•°ç»„ä»¶ï¼Œä½†æ˜¯å®ƒæ›´åŠ å…³æ³¨ UI å±‚æ¸²æŸ“ã€‚</p></blockquote><p>ä¸€èˆ¬æ”¾åœ¨é¡¹ç›®çš„ <code>components</code> æ–‡ä»¶ä¸‹</p><p>âœï¸<strong>å…³äº<code>å°è£…ç»„ä»¶</code>ï¼š</strong></p><p>a. æ›´åŠ å…³æ³¨ UI å±‚çš„æ¸²æŸ“ï¼Œæ³¨é‡è€ƒè™‘å¤ç”¨æ€§</p><p>b.åœ¨è®¾è®¡ç»„ä»¶æ—¶ï¼Œå¤šæ–¹é¢å’Œå¤šç»´åº¦è€ƒè™‘ï¼Œç»„ä»¶å¯æ‰©å±•æ€§</p><p>c.æ ·å¼çš„ä¸°å¯Œæ€§ï¼Œé«˜åº¦å¯å†å®šåˆ¶æ€§</p>]]></content>
    
    
    <categories>
      
      <category>hook</category>
      
    </categories>
    
    
    <tags>
      
      <tag>React</tag>
      
      <tag>hook</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å“åº”å¼å¸ƒå±€å°å®è·µ --Rem å’Œåª’ä½“æŸ¥è¯¢</title>
    <link href="/2022/03/28/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80%E5%B0%8F%E5%AE%9E%E8%B7%B5%20--Rem%20%E5%92%8C%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2/"/>
    <url>/2022/03/28/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80%E5%B0%8F%E5%AE%9E%E8%B7%B5%20--Rem%20%E5%92%8C%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2/</url>
    
    <content type="html"><![CDATA[<h2 id="å“åº”å¼å¸ƒå±€å°å®è·µ-â€“Rem-å’Œåª’ä½“æŸ¥è¯¢"><a href="#å“åº”å¼å¸ƒå±€å°å®è·µ-â€“Rem-å’Œåª’ä½“æŸ¥è¯¢" class="headerlink" title="å“åº”å¼å¸ƒå±€å°å®è·µ â€“Rem å’Œåª’ä½“æŸ¥è¯¢"></a>å“åº”å¼å¸ƒå±€å°å®è·µ â€“Rem å’Œåª’ä½“æŸ¥è¯¢</h2><blockquote><p>å‰è¨€ï¼šä¸‹åˆæ£é¼“äº†ä¸‹ï¼Œçœ‹äº†å¾ˆå¤šè§£å†³ç§»åŠ¨ç«¯è‡ªé€‚åº”çš„æ–¹æ¡ˆï¼Œå¤§å¤šä»¥ Rem å’Œåª’ä½“æŸ¥è¯¢ä½œä¸ºä¸»æµè§£å†³æ–¹æ¡ˆã€‚å¦å¤– CSS3 çš„ flex å’Œ Grid ä¹Ÿæ˜¯ä¸æˆ³çš„å¸ƒå±€è§£å†³æ–¹æ¡ˆã€‚</p></blockquote><h3 id="01-âœ”ï¸Rem-åª’ä½“æŸ¥è¯¢"><a href="#01-âœ”ï¸Rem-åª’ä½“æŸ¥è¯¢" class="headerlink" title="01 âœ”ï¸Rem / åª’ä½“æŸ¥è¯¢"></a>01 âœ”ï¸Rem / åª’ä½“æŸ¥è¯¢</h3><p>é€šä¿—ä¸€ç‚¹è¯´ï¼Œ<strong>Rem</strong> æ˜¯æ ¹æ® <code>&lt;Html&gt;</code> æ ·å¼çš„ <code>font-size</code> æ¥è®¡ç®—ç›¸å¯¹å¤§å°çš„ï¼Œæ¯”å¦‚è¯´ï¼Œ<code>&lt;Html&gt;</code> çš„ <code>font-size=16px</code>(é»˜è®¤)ï¼Œé‚£ä¹ˆå°±æ˜¯ç›¸å½“äº <code>1rem=16px </code> ã€‚å½“ç„¶<code>&lt;Html&gt;</code>çš„<code>font-size</code>æ˜¯å¯ä»¥è‡ªè¡Œè®¾ç½®çš„ã€‚</p><p>**<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Media_Queries/Using_media_queries">åª’ä½“æŸ¥è¯¢</a>**ï¼Œå…·ä½“å¯ä»¥çœ‹ä¸‹å®˜æ–¹æ–‡æ¡£ï¼Œè¿™è¾¹ä¸»è¦è®²ä¸‹å®ƒçš„å¸¸è§„ä½¿ç”¨ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-comment">// å¸¸è§è®¾å¤‡çš„åª’ä½“æŸ¥è¯¢</span><br>@media screen and (max-<span class="hljs-attr">width</span>: 1160px)<br>@media screen and (max-<span class="hljs-attr">width</span>: 820px)ipad <span class="hljs-title class_">Air</span><br>@media screen and (max-<span class="hljs-attr">width</span>: 768px)ipad mini<br>@media screen and (max-<span class="hljs-attr">width</span>: 390px)iphone 12pro<br></code></pre></div></td></tr></table></figure><h3 id="02-âœ”ï¸-å®è·µ"><a href="#02-âœ”ï¸-å®è·µ" class="headerlink" title="02 âœ”ï¸ å®è·µ"></a>02 âœ”ï¸ å®è·µ</h3><p><strong>æ€è·¯ï¼š</strong></p><ol><li><p>åœ¨å“åº”å¼å¸ƒå±€ä¸­ï¼Œå¿…é¡»é€šè¿‡<code>js</code>æ¥åŠ¨æ€æ§åˆ¶æ ¹å…ƒç´ <code>font-size</code>çš„å¤§å°ã€‚<code>( ç”¨æˆ·è®¾å¤‡å®½åº¦ / è®¾è®¡ç¨¿æ ‡å‡†å®½åº¦ ) * 100</code></p><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-comment">// è¿™è¾¹å°è£…æˆä¸€ä¸ª hook</span><br><span class="hljs-keyword">import</span> &#123; useCallback, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useMobileRem</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> inMobile = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByTagName</span>(<span class="hljs-string">&#x27;html&#x27;</span>)[<span class="hljs-number">0</span>].<span class="hljs-property">style</span>.<span class="hljs-property">fontSize</span> =<br>      (<span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">clientWidth</span> / <span class="hljs-number">1920</span>) * <span class="hljs-number">100</span> + <span class="hljs-string">&#x27;px&#x27;</span><br>  &#125;, [])<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;DOMContentLoaded&#x27;</span>, inMobile)<br>    <span class="hljs-variable language_">window</span>.<span class="hljs-property">onresize</span> = inMobile<br>    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&#x27;DOMContentLoaded&#x27;</span>, inMobile)<br>    &#125;<br>  &#125;, [inMobile])<br>&#125;<br></code></pre></div></td></tr></table></figure></li><li><p>é€šè¿‡<strong>åª’ä½“æŸ¥è¯¢</strong>çš„æ–¹å¼ï¼Œè‹¥å½“å‰è®¾å¤‡å®½åº¦å°äºæŸä¸ªå€¼æ—¶ï¼Œé‡‡ç”¨<code>rem</code>å•ä½çš„å¸ƒå±€ã€‚</p></li></ol><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-comment">// æ ¹æ®äº§å“éœ€æ±‚ï¼Œå»ç¼–å†™ä¸åŒå±å¹•çš„æ ·å¼</span><br>@media (min-<span class="hljs-attr">width</span>: 30em) and (max-<span class="hljs-attr">width</span>: 50em) &#123; ... &#125;<br></code></pre></div></td></tr></table></figure><h3 id="03-FAQ"><a href="#03-FAQ" class="headerlink" title="03 FAQ"></a>03 FAQ</h3><p>â“ï¼špxã€rem å’Œ em çš„åŒºåˆ«ï¼Ÿ</p><p>ğŸ’»ï¼š<strong>px</strong>æ˜¯å›ºå®šçš„åƒç´ ï¼Œæ˜¯ç›¸å¯¹äºæ˜¾ç¤ºå™¨å±å¹•åˆ†è¾¨ç‡è€Œè¨€çš„ã€‚<strong>em</strong>ã€<strong>rem</strong> å¯¹äº <strong>px <strong>æ›´å…·æœ‰çµæ´»æ€§ï¼Œä»–ä»¬æ˜¯ç›¸å¯¹é•¿åº¦å•ä½ï¼Œ</strong>em</strong> æ˜¯ç›¸å¯¹äºçˆ¶å…ƒç´ çš„å•ä½ï¼Œ<strong>rem</strong> (<strong>root em</strong> )æ˜¯ç›¸å¯¹æ ¹å…ƒç´ çš„é•¿åº¦ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>ç§»åŠ¨ç«¯å…¼å®¹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Rem</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Gird ç½‘æ ¼å¸ƒå±€</title>
    <link href="/2022/03/28/Gird%20%E7%BD%91%E6%A0%BC%E5%B8%83%E5%B1%80/"/>
    <url>/2022/03/28/Gird%20%E7%BD%91%E6%A0%BC%E5%B8%83%E5%B1%80/</url>
    
    <content type="html"><![CDATA[<h2 id="Gird-ç½‘æ ¼å¸ƒå±€"><a href="#Gird-ç½‘æ ¼å¸ƒå±€" class="headerlink" title="Gird ç½‘æ ¼å¸ƒå±€"></a>Gird ç½‘æ ¼å¸ƒå±€</h2><blockquote><p>å‰è¨€ï¼šæ˜¨å¤©ä¸ºäº†è§£å†³æ …æ ¼å¸ƒå±€ï¼Œèµ°äº†å¾ˆå¤šå¼¯è·¯ã€‚ä»Šå¤©çªç„¶çœ‹åˆ°é˜®ä¸€å³°è€å¸ˆ<a href="https://www.ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html">å…³äº Grid çš„æ–‡ç« </a>è®©æˆ‘å‘ç°äº†æ–°å¤§é™†ï¼ŒU1S1 é˜®è€å¸ˆå†™çš„æ–‡ç« çœŸçš„é€šä¿—æ˜“æ‡‚ã€‚åŠªåŠ›å‘é˜®è€å¸ˆçœ‹é½ï¼Œå¸Œæœ›è‡ªå·±æ–‡ç« ä»¥åä¹Ÿå¯ä»¥è¢«ç§°èµï¼ï¼è¯ä¸å¤šè¯´ï¼Œæ¥å¹²è´§ï¼</p></blockquote><h3 id="01-ç½‘æ ¼å¸ƒå±€"><a href="#01-ç½‘æ ¼å¸ƒå±€" class="headerlink" title="01 ç½‘æ ¼å¸ƒå±€"></a>01 ç½‘æ ¼å¸ƒå±€</h3><p>ä¹‹å‰çš„æˆ‘ä¸€ç›´éƒ½æ˜¯ç”¨ <code>Flex</code> å¼¹æ€§å¸ƒå±€ï¼Œè§‰å¾—æ‹¥æœ‰ <code>Flex</code>, è¿™å¤©ä¸‹å°±æ²¡æœ‰æˆ‘å¸ƒä¸äº†çš„å±€ã€‚ç›´åˆ°æˆ‘å‘ç°äº† <code>Grid</code>,æ˜¯çœŸçš„æ–¹ä¾¿ï¼Œéš¾æ€ªå„å„ UI æ¡†æ¶ï¼Œéƒ½ä¼šçœ‹åˆ°ä¸€ä¸ªå«åš <code>Grid</code> å¸ƒå±€ã€‚</p><p><strong>ç½‘æ ¼å¸ƒå±€</strong>ï¼Œ é¡¾åæ€ä¹‰æ˜¯ç±»ä¼¼ç½‘æ ¼ä¸€æ ·çš„å¸ƒå±€ï¼ˆæˆ‘å¥½åƒè¯´äº†ä¸€å¥åºŸè¯ï¼‰ã€‚ä¸ºäº†ä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿ<code>Gird</code> æ˜¯äºŒç»´å¸ƒå±€ï¼Œå®ƒå°†å®¹å™¨ç”¨ â€œ<strong>è¡Œ</strong>â€ å’Œ â€œ<strong>åˆ—</strong>â€åˆ’åˆ†ï¼Œè€Œä¸€ä¸ªä¸€ä¸ªæ ¼å­ç§°ä½œä¸ºå•å…ƒæ ¼ã€‚å‰é¢è¯´åˆ° <code>Flex</code> æ›´åƒæ˜¯ä¸€ç»´å¸ƒå±€ã€‚</p><h3 id="02-é€‚ç”¨åœºæ™¯"><a href="#02-é€‚ç”¨åœºæ™¯" class="headerlink" title="02 é€‚ç”¨åœºæ™¯"></a>02 é€‚ç”¨åœºæ™¯</h3><p><strong>è¯­æ³•æ–¹é¢</strong>ï¼Œäººå®¶é˜®è€å¸ˆå·²ç»è®²å¾ˆè¯¦ç»†äº†ï¼Œè¿™è¾¹å·ä¸ªæ‡’ã€‚è®²ä¸¤ä¸ªå¸¸è§çš„ä½¿ç”¨åœºæ™¯ï¼š</p><p>a. å‡å¦‚åšä¸ªå•†åŸåˆ—è¡¨ï¼Œéœ€è¦é‚£ç§æ’æ’åˆ—åˆ—å¾ˆæ•´é½é‚£ç§ï¼Œè¿˜éœ€è¦è‡ªé€‚åº”ä¸¤è¾¹çš„ç•™ç™½ã€‚</p><figure class="highlight css"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs css"><span class="hljs-selector-class">.container</span> &#123;<br>  <span class="hljs-attribute">display</span>: grid;<br>  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fill, <span class="hljs-number">180px</span>);<br>  <span class="hljs-attribute">justify-content</span>: space-evenly;<br>  <span class="hljs-attribute">grid-gap</span>: <span class="hljs-number">10px</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><img src="https://s2.loli.net/2022/03/25/ZB6RuVos9bn51wm.png" alt="image-20220325001113432" style="zoom:25%;" /><p>b. ä¸€èˆ¬ç½‘é¡µé¡µå¤´ï¼Œåˆ†æˆä¸‰éƒ¨åˆ†ï¼Œåˆ†åˆ«ä¸º logoã€ä¸­é—´åŒºåŸŸï¼ˆå„ä¸ªå…¥å£ï¼‰ã€å³ä¾§åŒºåŸŸï¼ˆç™»å½•ã€è¾“å…¥æ¡†ï¼‰ï¼Œä¸€èˆ¬è¿™ç§éƒ½æ˜¯ä¸¤è¾¹å›ºå®šï¼Œä¸­é—´åŒºåŸŸè‡ªé€‚åº”ã€‚</p><figure class="highlight css"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs css"><span class="hljs-selector-class">.container</span> &#123;<br> <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>    <span class="hljs-attribute">display</span>: grid;<br>    <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">200px</span> auto <span class="hljs-number">200px</span><br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/25/wsiYIxCnFlHtkqu.png" alt="image-20220325001325658"></p>]]></content>
    
    
    <categories>
      
      <category>CSS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CSS</tag>
      
      <tag>layoutå¸ƒå±€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¬è¯´ä½ è¿˜ä¸ä¼šâ€œè™šæ‹Ÿåˆ—è¡¨â€ï¼Œå¯¹ä¸èµ·æˆ‘æ¥æ™šäº†</title>
    <link href="/2022/03/28/%E5%90%AC%E8%AF%B4%E4%BD%A0%E8%BF%98%E4%B8%8D%E4%BC%9A%E2%80%9C%E8%99%9A%E6%8B%9F%E5%88%97%E8%A1%A8%E2%80%9D%EF%BC%8C%E5%AF%B9%E4%B8%8D%E8%B5%B7%E6%88%91%E6%9D%A5%E6%99%9A%E4%BA%86/"/>
    <url>/2022/03/28/%E5%90%AC%E8%AF%B4%E4%BD%A0%E8%BF%98%E4%B8%8D%E4%BC%9A%E2%80%9C%E8%99%9A%E6%8B%9F%E5%88%97%E8%A1%A8%E2%80%9D%EF%BC%8C%E5%AF%B9%E4%B8%8D%E8%B5%B7%E6%88%91%E6%9D%A5%E6%99%9A%E4%BA%86/</url>
    
    <content type="html"><![CDATA[<h2 id="å¬è¯´ä½ è¿˜ä¸ä¼šâ€œè™šæ‹Ÿåˆ—è¡¨â€ï¼Œå¯¹ä¸èµ·æˆ‘æ¥æ™šäº†"><a href="#å¬è¯´ä½ è¿˜ä¸ä¼šâ€œè™šæ‹Ÿåˆ—è¡¨â€ï¼Œå¯¹ä¸èµ·æˆ‘æ¥æ™šäº†" class="headerlink" title="å¬è¯´ä½ è¿˜ä¸ä¼šâ€œè™šæ‹Ÿåˆ—è¡¨â€ï¼Œå¯¹ä¸èµ·æˆ‘æ¥æ™šäº†"></a>å¬è¯´ä½ è¿˜ä¸ä¼šâ€œè™šæ‹Ÿåˆ—è¡¨â€ï¼Œå¯¹ä¸èµ·æˆ‘æ¥æ™šäº†</h2><blockquote><p>å‰è¨€ï¼šä¸Šæ¬¡è¯´åˆ°è¦å®è·µ React- window , ä»Šå¤©ç»ˆäºå¯ä»¥è¿‡æ¥è¿˜å€ºè¾½ğŸ˜€ï¼ç ”ç©¶äº†è®¸ä¹…ï¼Œæ€»å…±æƒ³åˆ° 3 ç§æ–¹æ³•å®ç°å®ƒã€‚</p></blockquote><h3 id="01-ä»€ä¹ˆæ˜¯è™šæ‹Ÿåˆ—è¡¨â“"><a href="#01-ä»€ä¹ˆæ˜¯è™šæ‹Ÿåˆ—è¡¨â“" class="headerlink" title="01 ä»€ä¹ˆæ˜¯è™šæ‹Ÿåˆ—è¡¨â“"></a>01 ä»€ä¹ˆæ˜¯è™šæ‹Ÿåˆ—è¡¨â“</h3><p>å®ƒæ˜¯å½“ä¸‹è§£å†³é•¿åˆ—è¡¨æ•°æ®ï¼ˆ2wæ•°æ®é‡ï¼‰é«˜æ€§èƒ½è§£å†³æ–¹æ¡ˆï¼Œå®ƒçš„åŸç†ä¹Ÿéå¸¸é€šä¿—æ˜“æ‡‚ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œ2wæ•°æ®æˆ–è€…æ›´å¤šæ•°æ®è¦æ¸²æŸ“åˆ°åˆ—è¡¨æ˜¯éå¸¸è€—æ—¶ï¼Œä¸”æ»šåŠ¨èµ·æ¥éå¸¸å¡çš„ï¼Œæ€»è€Œè¨€ä¹‹ç”¨æˆ·ä½“éªŒéå¸¸å·®çš„ã€‚è€Œ<strong>è™šæ‹Ÿåˆ—è¡¨</strong>ï¼Œåªéœ€è¦æ¸²æŸ“å¯è§†åŒºåŸŸæ•°æ®ï¼Œå®ƒæå¤§å‡å°‘æ¸²æŸ“æ€§èƒ½çš„å¼€é”€ï¼Œæå‡äº†ç”¨æˆ·çš„ä½“éªŒã€‚</p><p><img src="https://s2.loli.net/2022/03/30/a82CqZIzxPlos63.png" alt="image.png"></p><h3 id="02-å®è·µèµ·æ¥ğŸ’»"><a href="#02-å®è·µèµ·æ¥ğŸ’»" class="headerlink" title="02  å®è·µèµ·æ¥ğŸ’»"></a>02  å®è·µèµ·æ¥ğŸ’»</h3><blockquote><p>è¿™è¾¹ä¸ºäº†æ–¹ä¾¿æ²¡æœ‰å­¦è¿‡æ¡†æ¶çš„å°ä¼™ä¼´ï¼Œæˆ‘ç”¨åŸç”Ÿçš„<code>Html</code>æ¥ç¼–å†™ï¼ŒåŒæ—¶ä¸Šä¼ åˆ°äº†åœ¨çº¿ç¼–è¾‘IDEé‡Œé¢ï¼Œå¯ä¾›å¤§å®¶å‚è€ƒ</p></blockquote><p><strong>a.  Position æ³•ï¼š</strong></p><blockquote><ul><li><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰å‡ ä¸ªå˜é‡</p><ul><li><p>startIndex:  ç”¨æˆ·å¯è§†åŒºåŸŸçš„ç¬¬ä¸€ä¸ªæ•°æ®é¡¹ï¼Œå‚è€ƒä¸Šå›¾å°±æ˜¯ <code>item8</code> </p></li><li><p>endIndex: ç”¨æˆ·å¯è§†åŒºåŸŸçš„æœ€åä¸€ä¸ªæ•°æ®é¡¹ï¼Œä¸Šå›¾çš„ <code>item15</code></p></li><li></li></ul></li></ul></blockquote><p>æˆ‘ä»¬åªå¯¹å¯è§†å±‚åšæ¸²æŸ“ï¼Œä½†æ˜¯ä¸ºäº†ä¿æŒæ•´ä¸ªå®¹å™¨åƒæ¸²æŸ“æ­£å¸¸é•¿åˆ—è¡¨ä¸€æ ·ï¼Œé‡Œé¢çš„å®¹å™¨è¿˜éœ€è¦ä¿æŒåŸæœ‰çš„é«˜åº¦ã€‚è¿™è¾¹æŠŠ <code>Html</code> è®¾è®¡è¿™æ ·</p><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- å¤–å±‚å®¹å™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;vListContainer&quot;</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- å†…å±‚å®¹å™¨ --&gt;</span>  <br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;phantomContent&quot;</span>&gt;</span><br>    ...<br>    <span class="hljs-comment">&lt;!-- item-1 --&gt;</span><br>    <span class="hljs-comment">&lt;!-- item-2 --&gt;</span><br>    <span class="hljs-comment">&lt;!-- item-3 --&gt;</span><br>    ....<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></div></td></tr></table></figure><ul><li><p>å…¶ä¸­ï¼Œ<code>vListContainer</code> å®¹å™¨æ ·å¼ä¸º<code>overflow-y: auto;</code>ï¼ˆå‡ºç°æ»šåŠ¨æ¡ï¼‰</p><ul><li><p><code>phantomContent</code> å®¹å™¨æ ·å¼ä¸º<code>position: relative</code> </p></li><li><p>å†…å®¹å™¨é‡Œé¢å­é¡¹ <code>item-n</code> æ ·å¼ä¸º <code>position: absolute</code></p></li><li><p>è®¾è®¡è¿™æ ·ï¼Œå°±æ˜¯ä¸ºäº†æ–¹ä¾¿é€šè¿‡<strong>ç›¸å¯¹å®šä½</strong>çš„æ–¹å¼ï¼ŒæŠŠ <code>item-n</code> æ¸²æŸ“åˆ°å¯è§†åŒºåŸŸå»ï¼ˆçµé­‚ğŸ‘Œï¼‰</p></li></ul></li><li><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>vListContainer</code>  ç»‘å®š <strong>onScroll</strong> å‡½æ•°ï¼Œåˆ©ç”¨å…¶ <strong>scrollTop</strong> è®¡ç®—å‡º <code>startIndex</code> å’Œ <code>endIndex</code></p><p>è®¡ç®—ä¹‹å‰ï¼Œéœ€è¦çŸ¥é“ï¼š</p><ul><li><strong>rowHeight</strong> ï¼šå•é¡¹æ•°æ®çš„é«˜åº¦</li><li><strong>total</strong>ï¼š æ€»å…±æ•°æ®é‡</li><li><strong>height</strong>ï¼šå¯è§†çš„é«˜åº¦ï¼Œé€šè¿‡ <code>vListContainer</code> çš„ <strong>clientHeight</strong> å¯ä»¥æ‹¿åˆ°</li></ul></li><li><p>é€šè¿‡ä¸Šè¿°å˜é‡å°±å¯ä»¥è®¡ç®—å‡º ï¼š</p><ul><li>åˆ—è¡¨æ€»é«˜åº¦: <code>phantomHeight = total * rowHeight</code> è®¾ç½®å†…å±‚å®¹å™¨ <code>phantomContent </code>é«˜åº¦</li><li>å¯è§†èŒƒå›´å†…å±•ç¤ºå…ƒç´ æ•°ï¼š<code>limit = Math.ceil(height/rowHeight)</code></li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">onScroll</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">/* æ±‚å¾— startIndexï¼ŒendtIndex  */</span><br>    <span class="hljs-keyword">const</span> &#123; scrollTop &#125; = vListContainer;<br>    <span class="hljs-keyword">const</span> currentStartIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(scrollTop / rowHeight);<br><br>    <span class="hljs-keyword">if</span> (currentStartIndex !== startIndex) &#123;<br>        startIndex = currentStartIndex;<br>        endtIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(currentStartIndex + limit, total);<br>    &#125;<br>    <span class="hljs-comment">// startIndexï¼ŒendtIndex æ›´æ–°åï¼Œæ¸²æŸ“åˆ°å¯è§†åŒºåŸŸ</span><br>    <span class="hljs-title function_">renderDisplayContent</span>();<br>&#125;<br></code></pre></div></td></tr></table></figure><ul><li>å¾—åˆ°è¿™äº›å‚æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠæ•°æ®é¡¹æ¸²æŸ“åˆ°å¯è§†åŒºåŸŸå»è¾½ğŸ˜Š</li></ul><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">renderDisplayContent</span>(<span class="hljs-params"></span>) &#123;<br>    phantomContent.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = startIndex; i &lt;= endtIndex; i++) &#123;<br>        <span class="hljs-comment">// éå†æ•°æ®é¡¹ï¼Œå¹¶æ¸²æŸ“åˆ° DOM ä¸Š</span><br>        <span class="hljs-keyword">var</span> x = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;DIV&quot;</span>);<br>        x.<span class="hljs-property">style</span>.<span class="hljs-property">border</span> = <span class="hljs-string">&quot;1px solid #eee&quot;</span>;<br>        x.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">&quot;100%&quot;</span>;<br>        x.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">&quot;absolute&quot;</span>;<br>        <span class="hljs-comment">// è¿™å—å…³é”®ä»£ç ï¼Œé€šè¿‡ç»å¯¹å®šä½ï¼Œåƒé’‰å­ä¸€æ ·é’‰åœ¨å¯è§†åŒºåŸŸ</span><br>        x.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = i * rowHeight + <span class="hljs-string">&quot;px&quot;</span>;<br>        x.<span class="hljs-property">innerText</span> = i;<br>        phantomContent.<span class="hljs-title function_">appendChild</span>(x);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>ç„¶åå°±ä¼šå¾—åˆ°ä¸€ä¸ªç®€å•é«˜æ€§èƒ½çš„åˆ—è¡¨ â€”&gt; æ•ˆæœå›¾ğŸ’• </p><p><img src="https://s2.loli.net/2022/03/30/abYPShq7o3wHLmG.gif" alt="é«˜æ€§èƒ½é•¿åˆ—è¡¨æ•ˆæœå›¾.gif"></p><blockquote><p><strong>ç»“è®ºï¼š</strong>é€šè¿‡æ•ˆæœå›¾ï¼Œå¯ä»¥å¾ˆæ¸…æ™°çœ‹åˆ°ï¼Œ<code>DOM</code>åšåˆ°çœŸæ­£å¯æ¸²æŸ“å¯è§†åŒºçš„æ•°æ®é¡¹ï¼Œä» 2w â€“&gt; 20 ,æ€§èƒ½å¯è°“æ˜¯ç¿»äº†å¾ˆå¤šå€å‘¢ğŸ˜‰ã€‚è¿™è¾¹åªæ˜¯å®ç°ä¸€ä¸ªç®€å•é€ è½®å­ï¼Œå»ºè®®å¤§å®¶ä¸€å®šè¦åŠ¨æ‰‹ï¼Œèƒ½æ›´å¿«ä¸Šæ‰‹ã€‚å¦å¤– <code>React-window</code> å’Œ <code>react-virtualized</code> æ˜¯ç¤¾åŒºå°è£…å¥½çš„ï¼Œå½“ç„¶ï¼Œæœ‰ç°æˆæ˜¯æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ï¼Œä½†æ˜¯ä¸€å®šåŠ¨æ‰‹ï¼ŒçŸ¥è¯†æ‰æ˜¯å±äºæˆ‘ä»¬å˜šï¼ğŸ˜</p></blockquote><p><strong>çº¿ä¸ŠDemo:</strong> <a href="https://codesandbox.io/s/new-snowflake-bo42ol?file=/index.html">new-snowflake-bo42ol - CodeSandbox</a></p><blockquote><p><strong>ä¼˜åŒ–ï¼š</strong>ç°åœ¨æ¸²æŸ“çš„æ˜¯åªæ˜¯ç®€å•æ•°æ®é¡¹ï¼ŒçœŸæ­£åº”ç”¨åœºæ™¯ï¼Œå¯èƒ½æœ‰å›¾ç‰‡ï¼Œå„ç§æ–‡å­—ï¼Œæ¸²æŸ“èµ·æ¥å¯èƒ½ä¼šæœ‰å¡é¡¿ã€‚å¼•å…¥ <code>BufferSize</code>æ¦‚å¿µï¼Œç±»ä¼¼ç¼“å†²åŒºä¸€æ ·çš„ã€‚</p></blockquote><p><strong>ä¼˜åŒ–åçš„Demo:</strong><a href="https://codesandbox.io/s/cocky-montalcini-762v0x?file=/index.html">cocky-montalcini-762v0x - CodeSandbox</a></p><blockquote><p>å‰©ä¸‹ä¸¤ä¸ªæ–¹æ¡ˆï¼Œéƒ½å’Œä¸Šé¢å·®ä¸å¤šï¼Œåªæ˜¯å®ç°æ–¹å¼ä¸ä¸€æ ·ã€‚ä¸åšè¿‡å¤šè§£é‡Šï¼Œä¸¾ä¸€åä¸‰ã€‚çº¿ä¸ŠDemo æœ‰æ ‡æ³¨å…³é”®ä»£ç éƒ¨åˆ†</p></blockquote><p><strong>b. transform æ³•</strong></p><p><strong>å…³é”®æ€æƒ³ï¼š</strong> åˆ©ç”¨ <code>transform</code> yå±æ€§ï¼Œå»é€ æˆé‚£ç§åˆ’åŠ¨çš„æ•ˆæœ</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">renderDisplayContent</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">//------ å…³é”®ä»£ç éƒ¨åˆ† </span><br>    phantomContent.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">`translate3d(0px,<span class="hljs-subst">$&#123;startIndex * rowHeight&#125;</span>px,0px)`</span><br>    <span class="hljs-comment">//------</span><br>    phantomContent.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = startIndex; i &lt;= endtIndex; i++ )&#123;<br>        <span class="hljs-keyword">var</span> x = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;DIV&quot;</span>);<br>        x.<span class="hljs-property">style</span>.<span class="hljs-property">border</span> = <span class="hljs-string">&quot;1px solid #eee&quot;</span><br>        x.<span class="hljs-property">innerText</span> = i<br>        phantomContent.<span class="hljs-title function_">appendChild</span>(x)<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p><strong>çº¿ä¸ŠDemoï¼š</strong><a href="https://codesandbox.io/s/distracted-snowflake-v3400l?file=/index.html">distracted-snowflake-v3400l - CodeSandbox</a></p><p><strong>c. marginTop å’Œ marginBottom æ³•</strong></p><p><strong>å…³é”®æ€æƒ³ï¼š</strong> <strong>marginTop</strong> å’Œ <strong>marginBottom</strong> å»åˆ†åˆ«å¡«å……ï¼Œå¯è§†åŒºåŸŸçš„ <strong>ä¸Šé¢</strong> å’Œ <strong>ä¸‹é¢</strong>ã€‚ï¼ˆæœ‰å…´è¶£å¯ä»¥è¯•è¯• <strong>pandingTop</strong> å’Œ <strong>pandingBottom</strong>ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">renderDisplayContent</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-comment">//------å…³é”®ä»£ç éƒ¨åˆ†</span><br>        phantomContent.<span class="hljs-property">style</span>.<span class="hljs-property">marginTop</span> = rowHeight * startIndex + <span class="hljs-string">&quot;px&quot;</span>;<br>    <span class="hljs-comment">//------</span><br>        phantomContent.<span class="hljs-property">style</span>.<span class="hljs-property">marginBottom</span> =<br>          rowHeight * (total - endtIndex) + <span class="hljs-string">&quot;px&quot;</span>;<br>        phantomContent.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = startIndex; i &lt;= endtIndex; i++) &#123;<br>          <span class="hljs-keyword">var</span> x = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;DIV&quot;</span>);<br>          x.<span class="hljs-property">style</span>.<span class="hljs-property">border</span> = <span class="hljs-string">&quot;1px solid #eee&quot;</span>;<br>          x.<span class="hljs-property">innerText</span> = i;<br>          phantomContent.<span class="hljs-title function_">appendChild</span>(x);<br>        &#125;<br> &#125;<br></code></pre></div></td></tr></table></figure><p><strong>çº¿ä¸ŠDemo :</strong> <a href="https://codesandbox.io/s/hardcore-newton-phulu8?file=/index.html">hardcore-newton-phulu8 - CodeSandbox</a></p>]]></content>
    
    
    <categories>
      
      <category>React</category>
      
    </categories>
    
    
    <tags>
      
      <tag>React</tag>
      
      <tag>æ€§èƒ½ä¼˜åŒ–</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>useThrottle hookèŠ‚æµ</title>
    <link href="/2022/03/28/useThrottle%20hook%20%E7%9A%84%E5%B0%81%E8%A3%85/"/>
    <url>/2022/03/28/useThrottle%20hook%20%E7%9A%84%E5%B0%81%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<h2 id="useThrottle-hook-èŠ‚æµ"><a href="#useThrottle-hook-èŠ‚æµ" class="headerlink" title="useThrottle hook èŠ‚æµ"></a>useThrottle hook èŠ‚æµ</h2><blockquote><p>å‰è¨€, èŠ‚æµæ˜¯å‰ç«¯å¸¸ç”¨å·¥å…·å‡½æ•°ã€‚æ¯”å¦‚è¯´è¿›è¡Œçª—å£çš„ resize, onscroll ç­‰æ“ä½œæ—¶ï¼Œäº‹ä»¶è°ƒç”¨çš„é¢‘ç‡å¾ˆé«˜ï¼Œä½¿å¾—æµè§ˆå™¨å¼€é”€å¾ˆå¤§ï¼Œä½¿å¾—ç”¨æˆ·çš„ä½“éªŒå¾ˆå·®ã€‚ä½¿ç”¨èŠ‚æµå¯ä»¥æå¤§é™ä½è°ƒç”¨çš„é¢‘ç‡ï¼Œæ‰€ä»¥å°†å…¶å°è£…æˆ hookã€‚</p></blockquote><p><strong>èŠ‚æµçš„åŸç†ï¼š</strong> å®šä¹‰ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œè§„å®šåœ¨ delay åæ‰§è¡Œå‡½æ•°ã€‚å¦‚æœåœ¨ delay æ—¶é—´å†…å†æ¬¡è§¦å‘ï¼Œåˆ™ä¼šåˆ¤æ–­å®šæ—¶å™¨æ˜¯å¦å­˜åœ¨ï¼Œæœ‰åˆ™è¿”å›ï¼ˆä¸æ‰§è¡Œæ“ä½œï¼‰ï¼›æ— åˆ™ï¼Œé‡æ–°è®¾å®šä¸€ä¸ªè®¡æ—¶å™¨ï¼ˆdelay åæ‰§è¡Œå‡½æ•°ï¼‰ã€‚</p><p><strong>èŠ‚æµ hook:</strong></p><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useEffect, useCallback, useRef &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">useThrottle</span>(<span class="hljs-params">fn, delay, dep = []</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123; current &#125; = <span class="hljs-title function_">useRef</span>(&#123; fn, <span class="hljs-attr">timer</span>: <span class="hljs-literal">null</span> &#125;)<br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    current.<span class="hljs-property">fn</span> = fn<br>  &#125;, [fn, current])<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useCallback</span>(<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">...args</span>) &#123;<br>      <span class="hljs-keyword">if</span> (!current.<span class="hljs-property">timer</span>) &#123;<br>        current.<span class="hljs-property">timer</span> = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>          <span class="hljs-keyword">delete</span> current.<span class="hljs-property">timer</span><br>        &#125;, delay)<br>        current.<span class="hljs-property">fn</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, ...args)<br>      &#125;<br>    &#125;,<br>    [...dep, delay, current]<br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useThrottle<br></code></pre></div></td></tr></table></figure><p><strong>ä½¿ç”¨æ–¹æ³•ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * @fn: å‡½æ•°</span><br><span class="hljs-comment"> * @delay: å»¶è¿Ÿæ—¶é—´ï¼ˆmsï¼‰</span><br><span class="hljs-comment"> * @dep: ä¾èµ–</span><br><span class="hljs-comment"> */</span><br><span class="hljs-title function_">useThrottle</span>(func, <span class="hljs-number">500</span>, [])<br></code></pre></div></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>hook</category>
      
    </categories>
    
    
    <tags>
      
      <tag>React</tag>
      
      <tag>hook</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>React of Study</title>
    <link href="/2022/03/18/React%20of%20Study/"/>
    <url>/2022/03/18/React%20of%20Study/</url>
    
    <content type="html"><![CDATA[<h1 id="React-of-Study"><a href="#React-of-Study" class="headerlink" title="React of Study"></a>React of Study</h1><h2 id="ä¸€-React-å…¥é—¨"><a href="#ä¸€-React-å…¥é—¨" class="headerlink" title="ä¸€.React å…¥é—¨"></a>ä¸€.React å…¥é—¨</h2><h3 id="JSX-ç®€ä»‹"><a href="#JSX-ç®€ä»‹" class="headerlink" title="JSX ç®€ä»‹"></a>JSX ç®€ä»‹</h3><p>JSXï¼Œæ˜¯ä¸€ä¸ª JavaScript çš„è¯­æ³•æ‰©å±•ã€‚</p><h5 id="è¯­æ³•è§„åˆ™ï¼š"><a href="#è¯­æ³•è§„åˆ™ï¼š" class="headerlink" title="è¯­æ³•è§„åˆ™ï¼š"></a>è¯­æ³•è§„åˆ™ï¼š</h5><ul><li><p>åœ¨ JSX ä¸­åµŒå…¥è¡¨è¾¾å¼(åŒºåˆ†è¡¨è¾¾å¼ä¸ä»£ç å—)</p></li><li><p>æœ¬èº« JSX ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼</p></li><li><p>è™šæ‹Ÿ DOM ,ä¸€äº›æ ‡ç­¾çš„å±æ€§é‡‡ç”¨ <strong>â€œ å°é©¼å³°æ³•â€</strong></p><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VDOM</span> = <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">fontSize:</span> &#x27;<span class="hljs-attr">26px</span>&#x27; &#125;&#125;&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br></code></pre></div></td></tr></table></figure></li><li><p>JSX é‡Œçš„ <code>class</code> å˜æˆäº† <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/className"><code>className</code></a>ï¼Œè€Œ <code>tabindex</code> åˆ™å˜ä¸º tabIndex;</p><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VDOM</span> = <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br></code></pre></div></td></tr></table></figure></li><li><p><img src="C:\Users\DuoRouSai\AppData\Roaming\Typora\typora-user-images\image-20220110162421373.png" alt="image-20220110162421373">ã€‚</p></li></ul><h3 id="React-Developer-Tools-è°ƒè¯•å·¥å…·"><a href="#React-Developer-Tools-è°ƒè¯•å·¥å…·" class="headerlink" title="React Developer Tools è°ƒè¯•å·¥å…·"></a>React Developer Tools è°ƒè¯•å·¥å…·</h3><ul><li>Components ç»„ä»¶ç»“æ„</li><li>Profiler æ€§èƒ½ç›‘æ§</li></ul><h2 id="äºŒ-React-é¢å‘ç»„ä»¶ç¼–ç¨‹"><a href="#äºŒ-React-é¢å‘ç»„ä»¶ç¼–ç¨‹" class="headerlink" title="äºŒ.React é¢å‘ç»„ä»¶ç¼–ç¨‹"></a>äºŒ.React é¢å‘ç»„ä»¶ç¼–ç¨‹</h2><h3 id="1-åŸºæœ¬ç†è§£å’Œä½¿ç”¨"><a href="#1-åŸºæœ¬ç†è§£å’Œä½¿ç”¨" class="headerlink" title="1.åŸºæœ¬ç†è§£å’Œä½¿ç”¨"></a>1.åŸºæœ¬ç†è§£å’Œä½¿ç”¨</h3><ul><li><p>å‡½æ•°å¼ç»„ä»¶</p><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-comment">// åœ¨ Babel ä¸‹ ï¼Œæ˜¯ä¸¥æ ¼æ¨¡å¼</span><br><span class="hljs-comment">// å‡½æ•°å¼ç¼–ç¨‹</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æˆ‘æ˜¯å‡½æ•°å¼ç¼–ç¨‹â€œç®€å•ç»„ä»¶â€<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br>&#125;<br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyComponent</span> /&gt;</span></span>, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))<br><span class="hljs-comment">// &lt;MyComponent/&gt; react å¸®ä½ è°ƒç”¨ MyComponent</span><br></code></pre></div></td></tr></table></figure></li><li><p>ç±»å¼ç»„ä»¶</p><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-comment">// åœ¨ Babel ä¸‹ ï¼Œæ˜¯ä¸¥æ ¼æ¨¡å¼</span><br><span class="hljs-comment">// ç±»å¼ç¼–ç¨‹</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="hljs-comment">// â€œå¤æ‚ç»„ä»¶â€ æœ‰ State</span><br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æˆ‘æ˜¯ç±»å¼ç¼–ç¨‹â€œå¤æ‚ç»„ä»¶â€<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyComponent</span> /&gt;</span></span>, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test&#x27;</span>))<br><span class="hljs-comment">// &lt;MyComponent/&gt; react å¸®ä½  new MyComponent</span><br></code></pre></div></td></tr></table></figure></li></ul><h3 id="2-ç»„ä»¶å®ä¾‹çš„ä¸‰å¤§æ ¸å¿ƒå±æ€§-1-State"><a href="#2-ç»„ä»¶å®ä¾‹çš„ä¸‰å¤§æ ¸å¿ƒå±æ€§-1-State" class="headerlink" title="2.ç»„ä»¶å®ä¾‹çš„ä¸‰å¤§æ ¸å¿ƒå±æ€§ 1: State"></a>2.ç»„ä»¶å®ä¾‹çš„ä¸‰å¤§æ ¸å¿ƒå±æ€§ 1: State</h3><h5 id="ç†è§£ï¼š"><a href="#ç†è§£ï¼š" class="headerlink" title="ç†è§£ï¼š"></a>ç†è§£ï¼š</h5><p>1.state æ˜¯ç»„ä»¶çš„çŠ¶æ€æœºï¼Œé€šè¿‡æ›´æ–°ç»„ä»¶çš„ state æ¥æ›´æ–°å¯¹åº”é¡µé¢æ˜¾ç¤ºï¼ˆé‡æ–°æ¸²æŸ“ï¼‰</p><p>2.state æ˜¯å¯¹è±¡å½¢å¼çš„ï¼Œå¤šä¸ª key-value ç»„åˆ</p><h5 id="å€¼å¾—æ³¨æ„ï¼š"><a href="#å€¼å¾—æ³¨æ„ï¼š" class="headerlink" title="å€¼å¾—æ³¨æ„ï¼š"></a>å€¼å¾—æ³¨æ„ï¼š</h5><blockquote><p>1.ç»„ä»¶ä¸­ render æ–¹æ³•ä¸­çš„ this æ˜¯ç»„ä»¶å®ä¾‹çš„å¯¹è±¡</p><p>2.ç»„ä»¶è‡ªå®šä¹‰æ–¹æ³•ä¸­ï¼Œé»˜è®¤å¼€å¯äº† use strictï¼Œä¸º undefine,è§£å†³ï¼š</p><ul><li><p>bind()ï¼Œå¼ºåˆ¶ç»‘å®šå®ä¾‹å¯¹è±¡çš„ this</p></li><li><p>ç®­å¤´å‡½æ•°</p><p>3.setState()ï¼Œç»„ä»¶çš„æ•°æ®ä¸å¯ä»¥ç›´æ¥æ›´æ”¹ã€‚</p></li></ul></blockquote><p>â€‹</p><h3 id="3-ç»„ä»¶å®ä¾‹çš„ä¸‰å¤§æ ¸å¿ƒå±æ€§-2-props"><a href="#3-ç»„ä»¶å®ä¾‹çš„ä¸‰å¤§æ ¸å¿ƒå±æ€§-2-props" class="headerlink" title="3.ç»„ä»¶å®ä¾‹çš„ä¸‰å¤§æ ¸å¿ƒå±æ€§ 2: props"></a>3.ç»„ä»¶å®ä¾‹çš„ä¸‰å¤§æ ¸å¿ƒå±æ€§ 2: props</h3><h5 id="ç†è§£ï¼š-1"><a href="#ç†è§£ï¼š-1" class="headerlink" title="ç†è§£ï¼š"></a>ç†è§£ï¼š</h5><ol><li>æ¯ä¸ªç»„ä»¶å¯¹è±¡éƒ½ä¼šæœ‰ props å±æ€§</li><li>ç»„ä»¶æ ‡ç­¾çš„æ‰€æœ‰å±æ€§éƒ½ä¿å­˜åœ¨ props ä¸­</li><li>ç”¨ props-type.js å¯¹å±æ€§è¿›è¡Œç±»å‹æ£€æµ‹ï¼Œå¿…è¦æ€§åˆ¤æ–­(React161 å¼€å§‹)</li></ol><h5 id="å€¼å¾—æ³¨æ„ï¼š-1"><a href="#å€¼å¾—æ³¨æ„ï¼š-1" class="headerlink" title="å€¼å¾—æ³¨æ„ï¼š"></a>å€¼å¾—æ³¨æ„ï¼š</h5><blockquote><ul><li>ç»„ä»¶å†…éƒ¨çš„ props æ˜¯åªè¯»å±æ€§çš„</li><li>æœ‰ç»„ä»¶å¤–å‘ç»„ä»¶å†…ä¼ é€’å˜åŒ–çš„æ•°æ®</li></ul></blockquote><h3 id="4-ç»„ä»¶å®ä¾‹çš„ä¸‰å¤§æ ¸å¿ƒå±æ€§-3-refs-ä¸äº‹ä»¶å¤„ç†"><a href="#4-ç»„ä»¶å®ä¾‹çš„ä¸‰å¤§æ ¸å¿ƒå±æ€§-3-refs-ä¸äº‹ä»¶å¤„ç†" class="headerlink" title="4.ç»„ä»¶å®ä¾‹çš„ä¸‰å¤§æ ¸å¿ƒå±æ€§ 3: refs ä¸äº‹ä»¶å¤„ç†"></a>4.ç»„ä»¶å®ä¾‹çš„ä¸‰å¤§æ ¸å¿ƒå±æ€§ 3: refs ä¸äº‹ä»¶å¤„ç†</h3><h5 id="ç†è§£ï¼š-2"><a href="#ç†è§£ï¼š-2" class="headerlink" title="ç†è§£ï¼š"></a>ç†è§£ï¼š</h5><blockquote><p>Refs æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œå…è®¸æˆ‘ä»¬è®¿é—® DOM èŠ‚ç‚¹æˆ–åœ¨ render æ–¹æ³•ä¸­åˆ›å»ºçš„ React å…ƒç´ ã€‚</p></blockquote><h5 id="ä¸‰ç§å½¢å¼åˆ›å»º-ref"><a href="#ä¸‰ç§å½¢å¼åˆ›å»º-ref" class="headerlink" title="ä¸‰ç§å½¢å¼åˆ›å»º ref:"></a>ä¸‰ç§å½¢å¼åˆ›å»º ref:</h5><ol><li><p>å­—ç¬¦ä¸²å½¢å¼çš„ ref</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js">input ref=<span class="hljs-string">&quot;input1&quot;</span> type=<span class="hljs-string">&quot;text&quot;</span><br></code></pre></div></td></tr></table></figure></li><li><p>å›è°ƒå½¢å¼çš„ ref</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js">input ref=&#123;<span class="hljs-function">(<span class="hljs-params">a</span>)=&gt;</span><span class="hljs-variable language_">this</span>.<span class="hljs-property">input1</span> = a&#125; type=<span class="hljs-string">&quot;text&quot;</span><br></code></pre></div></td></tr></table></figure></li><li><p>createRef åˆ›å»º ref å®¹å™¨</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js">input2 = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createRef</span>()<br>input ref=&#123;<span class="hljs-variable language_">this</span>.<span class="hljs-property">input1</span>&#125; type=<span class="hljs-string">&quot;text&quot;</span><br></code></pre></div></td></tr></table></figure></li></ol><h5 id="äº‹ä»¶å¤„ç†ï¼š"><a href="#äº‹ä»¶å¤„ç†ï¼š" class="headerlink" title="äº‹ä»¶å¤„ç†ï¼š"></a>äº‹ä»¶å¤„ç†ï¼š</h5><ol><li>é€šè¿‡ onXxx å±æ€§æŒ‡å®šäº‹ä»¶å¤„ç†å‡½æ•°ï¼ˆæ³¨æ„å¤§å°å†™ï¼‰<ul><li>React ä½¿ç”¨çš„å¼è‡ªå®šä¹‰(åˆæˆ)äº‹ä»¶ï¼Œè€Œä¸æ˜¯åŸç”Ÿçš„ DOM äº‹ä»¶â€“æ›´å¥½å…¼å®¹æ€§</li><li>React ä¸­çš„äº‹ä»¶é€šè¿‡å§”æ‰˜æ–¹å¼å¤„ç†çš„ï¼ˆå§”æ‰˜ç»™ç»„ä»¶æœ€å¤–å±‚çš„å…ƒç´ ï¼‰â€“æ›´é«˜çš„æ•ˆç‡</li></ul></li><li>é€šè¿‡ event.target å¾—åˆ°å‘ç”Ÿäº‹ä»¶çš„ DOM å¯¹è±¡</li></ol><h3 id="5-ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼š"><a href="#5-ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼š" class="headerlink" title="5.ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼š"></a>5.ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼š</h3><h5 id="æ—§ç‰ˆæœ¬çš„ç”Ÿå‘½å‘¨æœŸï¼š"><a href="#æ—§ç‰ˆæœ¬çš„ç”Ÿå‘½å‘¨æœŸï¼š" class="headerlink" title="æ—§ç‰ˆæœ¬çš„ç”Ÿå‘½å‘¨æœŸï¼š"></a>æ—§ç‰ˆæœ¬çš„ç”Ÿå‘½å‘¨æœŸï¼š</h5><p><img src="C:\Users\DuoRouSai\AppData\Roaming\Typora\typora-user-images\image-20220112113749152.png" alt="image-20220112113749152"></p><h6 id="ç”Ÿå‘½å‘¨æœŸçš„ä¸‰ä¸ªé˜¶æ®µï¼ˆæ—§ï¼‰ï¼š"><a href="#ç”Ÿå‘½å‘¨æœŸçš„ä¸‰ä¸ªé˜¶æ®µï¼ˆæ—§ï¼‰ï¼š" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸçš„ä¸‰ä¸ªé˜¶æ®µï¼ˆæ—§ï¼‰ï¼š"></a>ç”Ÿå‘½å‘¨æœŸçš„ä¸‰ä¸ªé˜¶æ®µï¼ˆæ—§ï¼‰ï¼š</h6><p><img src="C:\Users\DuoRouSai\AppData\Roaming\Typora\typora-user-images\image-20220112114024249.png" alt="image-20220112114024249"></p><h5 id="æ–°ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸï¼ˆ-gt-v17-0-0ï¼‰ï¼š"><a href="#æ–°ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸï¼ˆ-gt-v17-0-0ï¼‰ï¼š" class="headerlink" title="æ–°ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸï¼ˆ&gt;v17.0.0ï¼‰ï¼š"></a>æ–°ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸï¼ˆ&gt;v17.0.0ï¼‰ï¼š</h5><p><img src="C:\Users\DuoRouSai\AppData\Roaming\Typora\typora-user-images\image-20220112140120136.png" alt="image-20220112140120136"></p><h6 id="æ–°å¢ç”Ÿå‘½é’©å­ï¼ˆ2-ä¸ªï¼‰ï¼š"><a href="#æ–°å¢ç”Ÿå‘½é’©å­ï¼ˆ2-ä¸ªï¼‰ï¼š" class="headerlink" title="æ–°å¢ç”Ÿå‘½é’©å­ï¼ˆ2 ä¸ªï¼‰ï¼š"></a>æ–°å¢ç”Ÿå‘½é’©å­ï¼ˆ2 ä¸ªï¼‰ï¼š</h6><blockquote><p>getDerivedStateFromPropsï¼šæ­¤æ–¹æ³•é€‚ç”¨äº<a href="https://zh-hans.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#when-to-use-derived-state">ç½•è§çš„ç”¨ä¾‹</a>ï¼Œå³ state çš„å€¼åœ¨ä»»ä½•æ—¶å€™éƒ½å–å†³äº propsã€‚</p><p>getSnapshotBeforeUpdate()ï¼šå®ƒä½¿å¾—ç»„ä»¶èƒ½åœ¨å‘ç”Ÿæ›´æ”¹ä¹‹å‰ä» DOM ä¸­æ•è·ä¸€äº›ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œæ»šåŠ¨ä½ç½®ï¼‰ã€‚æ­¤ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ä»»ä½•è¿”å›å€¼å°†ä½œä¸ºå‚æ•°ä¼ é€’ç»™ <code>componentDidUpdate()</code>ã€‚</p></blockquote><h6 id="å³å°†åºŸå¼ƒç”Ÿå‘½é’©å­ï¼ˆä¸‰ä¸ªï¼‰ï¼šå‡éœ€åœ¨å‰é¢åŠ ä¸Š-UNSAFE-å‰ç¼€"><a href="#å³å°†åºŸå¼ƒç”Ÿå‘½é’©å­ï¼ˆä¸‰ä¸ªï¼‰ï¼šå‡éœ€åœ¨å‰é¢åŠ ä¸Š-UNSAFE-å‰ç¼€" class="headerlink" title="å³å°†åºŸå¼ƒç”Ÿå‘½é’©å­ï¼ˆä¸‰ä¸ªï¼‰ï¼šå‡éœ€åœ¨å‰é¢åŠ ä¸Š UNSAFE_ (å‰ç¼€)"></a>å³å°†åºŸå¼ƒç”Ÿå‘½é’©å­ï¼ˆä¸‰ä¸ªï¼‰ï¼šå‡éœ€åœ¨å‰é¢åŠ ä¸Š UNSAFE_ (å‰ç¼€)</h6><ul><li>componentWillMountï¼ˆï¼‰</li><li>componentWillUpdateï¼ˆï¼‰</li><li>componentWillReceivePropsï¼ˆï¼‰</li></ul><h3 id="6-è™šæ‹Ÿ-DOMï¼Œdiff-ç®—æ³•ï¼š"><a href="#6-è™šæ‹Ÿ-DOMï¼Œdiff-ç®—æ³•ï¼š" class="headerlink" title="6.è™šæ‹Ÿ DOMï¼Œdiff ç®—æ³•ï¼š"></a>6.è™šæ‹Ÿ DOMï¼Œdiff ç®—æ³•ï¼š</h3><p><img src="C:\Users\DuoRouSai\AppData\Roaming\Typora\typora-user-images\image-20220112161357938.png" alt="image-20220112161357938"></p><h2 id="ä¸‰-React-ajax"><a href="#ä¸‰-React-ajax" class="headerlink" title="ä¸‰.React ajax"></a>ä¸‰.React ajax</h2><h3 id="1-react-è„šæ‰‹æ¶é…ç½®ä»£ç†æ€»ç»“"><a href="#1-react-è„šæ‰‹æ¶é…ç½®ä»£ç†æ€»ç»“" class="headerlink" title="1.react è„šæ‰‹æ¶é…ç½®ä»£ç†æ€»ç»“"></a>1.react è„šæ‰‹æ¶é…ç½®ä»£ç†æ€»ç»“</h3><h4 id="æ–¹æ³•ä¸€ï¼š"><a href="#æ–¹æ³•ä¸€ï¼š" class="headerlink" title="æ–¹æ³•ä¸€ï¼š"></a>æ–¹æ³•ä¸€ï¼š</h4><p><img src="C:\Users\DuoRouSai\AppData\Roaming\Typora\typora-user-images\image-20220113230205483.png" alt="image-20220113230205483"></p><h4 id="æ–¹æ³•äºŒï¼š"><a href="#æ–¹æ³•äºŒï¼š" class="headerlink" title="æ–¹æ³•äºŒï¼š"></a>æ–¹æ³•äºŒï¼š</h4><blockquote><p>æ³¨æ„ä» http-proxy-middleware v2.0 å¼€å§‹ä½¿ç”¨ createProxyMiddleware ä»£æ›¿ proxy</p><p><img src="C:\Users\DuoRouSai\AppData\Roaming\Typora\typora-user-images\image-20220113230149722.png" alt="image-20220113230149722"></p></blockquote><h3 id="2-xhrï¼ˆaxiosï¼‰-å’Œ-fetch-çš„åŒºåˆ«"><a href="#2-xhrï¼ˆaxiosï¼‰-å’Œ-fetch-çš„åŒºåˆ«" class="headerlink" title="2.xhrï¼ˆaxiosï¼‰ å’Œ fetch çš„åŒºåˆ«"></a>2.xhrï¼ˆaxiosï¼‰ å’Œ fetch çš„åŒºåˆ«</h3><blockquote><p><strong>xhr ä¸ fetch æ˜¯åŒä¸€çº§åˆ«çš„ ï¼ï¼ï¼</strong></p></blockquote><h5 id="1-ä¼ ç»Ÿçš„-xhr-è¯·æ±‚"><a href="#1-ä¼ ç»Ÿçš„-xhr-è¯·æ±‚" class="headerlink" title="1.ä¼ ç»Ÿçš„ xhr è¯·æ±‚"></a>1.ä¼ ç»Ÿçš„ xhr è¯·æ±‚</h5><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>()<br>xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">&#x27;GET&#x27;</span>, url)<br>xhr.<span class="hljs-property">responseType</span> = <span class="hljs-string">&#x27;json&#x27;</span><br><br>xhr.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(xhr.<span class="hljs-property">response</span>)<br>&#125;<br><br>xhr.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Oops, error&#x27;</span>)<br>&#125;<br><br>xhr.<span class="hljs-title function_">send</span>()<br></code></pre></div></td></tr></table></figure><h5 id="2-æœªä¼˜åŒ–çš„-fetch-è¯·æ±‚"><a href="#2-æœªä¼˜åŒ–çš„-fetch-è¯·æ±‚" class="headerlink" title="2.æœªä¼˜åŒ–çš„ fetch è¯·æ±‚"></a>2.æœªä¼˜åŒ–çš„ fetch è¯·æ±‚</h5><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-title function_">fetch</span>(url)<br>  .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) &#123;<br>    <span class="hljs-keyword">return</span> response.<span class="hljs-title function_">json</span>()<br>  &#125;)<br>  .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data)<br>  &#125;)<br>  .<span class="hljs-title function_">catch</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Oops, error&#x27;</span>)<br>  &#125;)<br></code></pre></div></td></tr></table></figure><h5 id="3-ä¼˜åŒ–åçš„-fetch-è¯·æ±‚"><a href="#3-ä¼˜åŒ–åçš„-fetch-è¯·æ±‚" class="headerlink" title="3.ä¼˜åŒ–åçš„ fetch è¯·æ±‚"></a>3.ä¼˜åŒ–åçš„ fetch è¯·æ±‚</h5><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">try</span> &#123;<br>  <span class="hljs-keyword">let</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url)<br>  <span class="hljs-keyword">let</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>()<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data)<br>&#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Oops, error&#x27;</span>, e)<br>&#125;<br><span class="hljs-comment">// æ³¨ï¼šè¿™æ®µä»£ç å¦‚æœæƒ³è¿è¡Œï¼Œå¤–é¢éœ€è¦åŒ…ä¸€ä¸ª async function</span><br></code></pre></div></td></tr></table></figure><h3 id="3-PubSubJs-æ¶ˆæ¯è®¢é˜…-ä¸-å‘å¸ƒæœºåˆ¶"><a href="#3-PubSubJs-æ¶ˆæ¯è®¢é˜…-ä¸-å‘å¸ƒæœºåˆ¶" class="headerlink" title="3.PubSubJs æ¶ˆæ¯è®¢é˜… ä¸ å‘å¸ƒæœºåˆ¶"></a>3.PubSubJs æ¶ˆæ¯è®¢é˜… ä¸ å‘å¸ƒæœºåˆ¶</h3><p><img src="C:\Users\DuoRouSai\AppData\Roaming\Typora\typora-user-images\image-20220114154029332.png" alt="image-20220114154029332"></p><h5 id="ä½¿ç”¨è¿‡ç¨‹ï¼š"><a href="#ä½¿ç”¨è¿‡ç¨‹ï¼š" class="headerlink" title="ä½¿ç”¨è¿‡ç¨‹ï¼š"></a>ä½¿ç”¨è¿‡ç¨‹ï¼š</h5><p>å¯¼å…¥ pubsub.js æ¨¡å—</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">PubSub</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pubsub-js&#x27;</span><br></code></pre></div></td></tr></table></figure><p>åœ¨éœ€è¦ æ¶ˆæ¯è®¢é˜… çš„ç»„ä»¶ï¼Œè®¢é˜…</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">var</span> token = <span class="hljs-title class_">PubSub</span>.<span class="hljs-title function_">subscribe</span>(<span class="hljs-string">&#x27;MY TOPIC&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">msg, data</span>) =&gt;</span> &#123;&#125;)<br></code></pre></div></td></tr></table></figure><p>åœ¨éœ€è¦ å‘å¸ƒ ç»„ä»¶ä¸­ï¼Œå‘å¸ƒæ¶ˆæ¯ï¼ˆmsg:æ¶ˆæ¯ï¼Œdata:æ•°æ®ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-title class_">PubSub</span>.<span class="hljs-title function_">publish</span>(<span class="hljs-string">&#x27;MY TOPIC&#x27;</span>, <span class="hljs-string">&#x27;hello world!&#x27;</span>)<br></code></pre></div></td></tr></table></figure><p>æ¶ˆæ¯è®¢é˜…çš„ç»„ä»¶å¾…é”€æ¯åï¼Œå–æ¶ˆè®¢é˜…</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-title class_">PubSub</span>.<span class="hljs-title function_">unsubscribe</span>(token)<br></code></pre></div></td></tr></table></figure><h2 id="å››-React-è·¯ç”±"><a href="#å››-React-è·¯ç”±" class="headerlink" title="å››.React è·¯ç”±"></a>å››.React è·¯ç”±</h2><h3 id="1-Spa-ç†è§£"><a href="#1-Spa-ç†è§£" class="headerlink" title="1.Spa ç†è§£"></a>1.Spa ç†è§£</h3><p><img src="C:\Users\DuoRouSai\AppData\Roaming\Typora\typora-user-images\image-20220114155209771.png" alt="image-20220114155209771"></p><h3 id="2-è·¯ç”±çš„ç†è§£"><a href="#2-è·¯ç”±çš„ç†è§£" class="headerlink" title="2.è·¯ç”±çš„ç†è§£"></a>2.è·¯ç”±çš„ç†è§£</h3><ol><li><p>ä»€ä¹ˆæ˜¯è·¯ç”±ï¼Ÿ</p><p><img src="C:\Users\DuoRouSai\AppData\Roaming\Typora\typora-user-images\image-20220114155416804.png" alt="image-20220114155416804"></p></li><li><p>è·¯ç”±åˆ†ç±»</p><ul><li><p>åç«¯è·¯ç”±</p><p><img src="C:\Users\DuoRouSai\AppData\Roaming\Typora\typora-user-images\image-20220114160524889.png" alt="image-20220114160524889"></p></li><li><p>å‰ç«¯è·¯ç”±</p><p>æ–¹å¼ä¸€ï¼šH5 æ¨å‡ºæ¥çš„ history æ¨¡å¼(æ—§çš„æµè§ˆå™¨ä¸å…¼å®¹)</p><p>æ–¹å¼äºŒï¼šhash å€¼ï¼ˆé”šç‚¹ï¼‰</p><p><img src="C:\Users\DuoRouSai\AppData\Roaming\Typora\typora-user-images\image-20220114160544635.png" alt="image-20220114160544635"></p></li></ul></li></ol><h3 id="3-è·¯ç”±åŸºæœ¬ä½¿ç”¨ï¼š"><a href="#3-è·¯ç”±åŸºæœ¬ä½¿ç”¨ï¼š" class="headerlink" title="3.è·¯ç”±åŸºæœ¬ä½¿ç”¨ï¼š"></a>3.è·¯ç”±åŸºæœ¬ä½¿ç”¨ï¼š</h3><h2 id="äº”-Redux-çŠ¶æ€ç®¡ç†"><a href="#äº”-Redux-çŠ¶æ€ç®¡ç†" class="headerlink" title="äº”.Redux çŠ¶æ€ç®¡ç†"></a>äº”.Redux çŠ¶æ€ç®¡ç†</h2><h3 id="1-redux-åŸç†å›¾"><a href="#1-redux-åŸç†å›¾" class="headerlink" title="1.redux åŸç†å›¾"></a>1.redux åŸç†å›¾</h3><p><img src="C:\Users\DuoRouSai\AppData\Roaming\Typora\typora-user-images\image-20220126180325926.png" alt="image-20220126180325926"></p><h2 id="2-react-redux-åŸç†å›¾"><a href="#2-react-redux-åŸç†å›¾" class="headerlink" title="2.react-redux åŸç†å›¾"></a>2.react-redux åŸç†å›¾</h2><p><img src="C:\Users\DuoRouSai\AppData\Roaming\Typora\typora-user-images\image-20220126180413848.png" alt="image-20220126180413848"></p>]]></content>
    
    
    <categories>
      
      <category>React</category>
      
    </categories>
    
    
    <tags>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰ç«¯å·¥ç¨‹åŒ–--æ‰¹é‡å¯¼å…¥æ¨¡å—</title>
    <link href="/2022/03/18/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96--%E6%89%B9%E9%87%8F%E5%AF%BC%E5%85%A5%E6%A8%A1%E5%9D%97/"/>
    <url>/2022/03/18/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96--%E6%89%B9%E9%87%8F%E5%AF%BC%E5%85%A5%E6%A8%A1%E5%9D%97/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰ç«¯å·¥ç¨‹åŒ–â€“æ‰¹é‡å¯¼å…¥æ¨¡å—"><a href="#å‰ç«¯å·¥ç¨‹åŒ–â€“æ‰¹é‡å¯¼å…¥æ¨¡å—" class="headerlink" title="å‰ç«¯å·¥ç¨‹åŒ–â€“æ‰¹é‡å¯¼å…¥æ¨¡å—"></a>å‰ç«¯å·¥ç¨‹åŒ–â€“æ‰¹é‡å¯¼å…¥æ¨¡å—</h2><h3 id="01-èµ·å› "><a href="#01-èµ·å› " class="headerlink" title="01 èµ·å› "></a>01 èµ·å› </h3><blockquote><p>å‰ç«¯é¡¹ç›®ä¸­ï¼Œå¯èƒ½éšç€é¡¹ç›®çš„åºå¤§çš„ï¼Œæ¨¡å—éšä¹‹é¡¹ç›®ä½“é‡è€Œå˜å¤šï¼Œæ¯”å¦‚è¯´ service æ¨¡å—ä¸‹æœ‰ 100+ æ¨¡å—ï¼Œæ‰‹åŠ¨å¼•å…¥å®åœ¨æµªè´¹æ—¶é—´äº†ï¼Œæ‰€ä»¥ç¨‹åºçŒ¿èƒ½ç”¨æŠ€æœ¯å·æ‡’ï¼Œå°±ä¸è¦æ‰‹å·¥ã€‚</p></blockquote><h3 id="02-å…·ä½“å®ç°"><a href="#02-å…·ä½“å®ç°" class="headerlink" title="02 å…·ä½“å®ç°"></a>02 å…·ä½“å®ç°</h3><blockquote><p><a href="https://webpack.docschina.org/guides/dependency-management/#requirecontext">å®˜æ–¹æ–‡æ¡£åœ¨è¿™é‡Œ~~~</a></p></blockquote><p>è¿™è¾¹å…·ä½“è¯­æ³•å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼Œä¸‹è¾¹å…·ä½“æ˜¯å…·ä½“å®ç°ï¼š</p><p>æ¯”å¦‚ï¼š</p><p><code>service</code> æ¨¡å—ä¸‹æœ‰ä¸ª<code>modules</code>ï¼Œå­˜æ”¾ <code>a.js, b.js, c.js</code></p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// service/index.js</span><br><span class="hljs-comment">// å‰ç«¯å·¥ç¨‹åŒ–é‡Œé¢å¸¸ç”¨çš„æ‰¹é‡å¯¼å…¥æ–‡ä»¶</span><br><span class="hljs-keyword">const</span> requireContext = <span class="hljs-built_in">require</span>.<span class="hljs-title function_">context</span>(<span class="hljs-string">&#x27;./modules&#x27;</span>, <span class="hljs-literal">false</span>, <span class="hljs-regexp">/\.js$/</span>)<br><span class="hljs-comment">// ç”¨äºå­˜æ”¾æ¨¡å—çš„æ•°ç»„</span><br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MODULES</span> = []<br><span class="hljs-keyword">const</span> requireContextKeys = requireContext.<span class="hljs-title function_">keys</span>()<br><br><span class="hljs-comment">// æ ¹æ®ä¸Šé¢æ‰¹é‡å¯¼å…¥çš„æ–‡ä»¶è¯»å–é‡Œé¢å®šä¹‰çš„æ¨¡å—åˆ° MOUDULES æ•°ç»„ä¸­</span><br>requireContextKeys.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> <span class="hljs-variable language_">module</span> = requireContext(item)<br>  <span class="hljs-variable constant_">MODULES</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">module</span>.<span class="hljs-property">Service</span>)<br>&#125;)<br></code></pre></div></td></tr></table></figure><p>é€šè¿‡ <code>clog</code> æ‰“å° <code>MODULES</code> æ•°ç»„</p><p><img src="https://i.ibb.co/YZz7vXL/image-20220314121929909.png"></p>]]></content>
    
    
    <categories>
      
      <category>Webpack</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰ç«¯å·¥ç¨‹åŒ–</tag>
      
      <tag>Webpack</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JavaScript äº‹ä»¶å¾ªç¯</title>
    <link href="/2022/03/18/JavaScript%20%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/"/>
    <url>/2022/03/18/JavaScript%20%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/</url>
    
    <content type="html"><![CDATA[<h2 id="JavaScript-äº‹ä»¶å¾ªç¯"><a href="#JavaScript-äº‹ä»¶å¾ªç¯" class="headerlink" title="JavaScript äº‹ä»¶å¾ªç¯"></a>JavaScript äº‹ä»¶å¾ªç¯</h2><p>å” å” åŸºç¡€ğŸ˜Š</p><p>ä¼—æ‰€å‘¨çŸ¥ <code>js</code> æ˜¯å•çº¿ç¨‹çš„ï¼Œè‡³äºä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹çš„ï¼Ÿ</p><p>ç­”ï¼š <code>js</code>ä½œä¸ºè„šæœ¬è¯­è¨€ï¼Œå…¶ä¸»è¦è´Ÿè´£ <code>æ“ä½œDOM</code> å’Œ <code>ç”¨æˆ·äº¤äº’</code> ã€‚å‡å¦‚å˜æˆå¤šçº¿ç¨‹çš„è¯ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨ç»™æŸä¸ª<code>DOM</code> æ·»åŠ å†…å®¹ ï¼Œè€Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨åˆ é™¤è¿™ä¸ª <code>DOM</code> ä¸€åˆ‡å°±ä¹±å¥—äº†ã€‚</p><h3 id="01-åŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡"><a href="#01-åŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡" class="headerlink" title="01 åŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡"></a>01 åŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡</h3><p>â€‹        <strong>è™½ç„¶ <code>js</code> æ˜¯å•çº¿ç¨‹ï¼Œä½†æ˜¯å¼•å…¥ä¸¤ä¸ªæ¦‚å¿µï¼Œä¸€ä¸ªæ˜¯<code>åŒæ­¥</code>ï¼Œå¦å¤–ä¸€ä¸ª<code>å¼‚æ­¥</code>ã€‚</strong></p><ul><li>åŒæ­¥ä»»åŠ¡ï¼š</li></ul><p>ä»£ç æ˜¯æŒ‰ç…§<code>æ‰§è¡Œæ ˆ</code>é¡ºåºæ‰§è¡Œä¸‹æ¥çš„ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Hello&quot;</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;DouR&quot;</span>)<br><span class="hljs-comment">// console:</span><br><span class="hljs-comment">// 1ï¼šHello </span><br><span class="hljs-comment">// 2ï¼šDouR</span><br></code></pre></div></td></tr></table></figure><ul><li>å¼‚æ­¥ä»»åŠ¡ï¼š</li></ul><p>å¼‚æ­¥æ“ä½œï¼Œæ¯”å¦‚ï¼š<code>setTimeout</code>ï¼Œ<code>Promise</code>ï¼Œ<code>Ajax</code>â€¦ç­‰ã€‚å½“é¡ºåºæ‰§è¡Œ <code>æ‰§è¡Œæ ˆ</code> ä»£ç æ—¶ï¼Œé‡åˆ°å¼‚æ­¥æ“ä½œï¼Œå¯ä»¥æŠŠå®ƒä»¬çœ‹åšæ¯”è¾ƒè€—æ—¶çš„å·¥ä½œï¼Œæ”¾å…¥<code>ä»»åŠ¡é˜Ÿåˆ—</code>ä¸­å»ï¼Œæ¥ç€æ‰§è¡Œä»£ç ï¼Œç­‰æ‰§è¡Œå®ŒåŒæ­¥ä»£ç ååœ¨æ‰§è¡Œ<code>ä»»åŠ¡é˜Ÿåˆ—</code> çš„ä»»åŠ¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>&#123;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Hello&quot;</span>)<br>&#125;)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;DouR&quot;</span>)<br><span class="hljs-comment">// console:</span><br><span class="hljs-comment">// 1: DouR</span><br><span class="hljs-comment">// 2: Hello </span><br></code></pre></div></td></tr></table></figure><p>å¯ä»¥å¾ˆæ¸…æ™°çœ‹åˆ°å…ˆæ‰“å° <code>DouR</code> </p><h3 id="02-Event-Loop"><a href="#02-Event-Loop" class="headerlink" title="02 Event Loop"></a>02 Event Loop</h3><p>äº‹ä»¶å¾ªç¯å°±æ˜¯ <code>å…¥æ ˆå‡ºæ ˆ</code> çš„è¿‡ç¨‹ï¼Œä¸Šé¢æåˆ°çš„å¼‚æ­¥ä»»åŠ¡ï¼Œå¯ä»¥åˆ†æˆ <code>å®ä»»åŠ¡ï¼ˆMacrotaskï¼‰</code>  å’Œ  <code>å¾®ä»»åŠ¡ï¼ˆMicrotaskï¼‰</code></p><p><strong>å®ä»»åŠ¡ï¼š</strong>setTimeout, setInterval, setImmediate, I/O, UI render</p><p><strong>å¾®ä»»åŠ¡ï¼š</strong>process.nextTick, Promises, Object.observe, MutationObserver(H5 æ–°ç‰¹æ€§)</p><p><strong>æ¯ä¸€æ¬¡ Event Loop è§¦å‘æ—¶ï¼š</strong></p><ol><li>é¦–å…ˆæ‰§è¡Œ<code>ä¸»æ‰§è¡Œæ ˆ</code>ä»»åŠ¡ï¼Œä¾‹å¦‚ script ä»»åŠ¡</li><li>åˆ†åˆ«å°† <code>å®ä»»åŠ¡</code> å’Œ <code>å¾®ä»»åŠ¡</code> ,å‹å…¥<code>å®ä»»åŠ¡é˜Ÿåˆ—</code> å’Œ <code>å¾®ä»»åŠ¡é˜Ÿåˆ—</code></li><li>æ¥ç€ï¼Œå…ˆå–å‡º <code>å¾®ä»»åŠ¡é˜Ÿåˆ—</code> æ‰§è¡Œç›´è‡³æ¸…ç©ºï¼ˆæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç¢°åˆ°<code>å¾®ä»»åŠ¡</code>æˆ–è€…<code>å®ä»»åŠ¡</code> åˆ†åˆ«å‹å…¥é˜Ÿåˆ—ä¸­å»ï¼Œç”¨äºä¸‹ä¸€è½® Event loopæ‰§è¡Œï¼‰</li><li>â€”â€” æ–°çš„ä¸€è½® Event Loopâ€”â€”</li><li>å–å‡º <code>å®ä»»åŠ¡é˜Ÿåˆ—</code> æ‰§è¡Œç›´è‡³æ¸…ç©º </li><li>å–å‡º <code>å¾®ä»»åŠ¡é˜Ÿåˆ—</code> æ‰§è¡Œç›´è‡³æ¸…ç©º </li><li>5ã€6é‡å¤</li></ol><p><strong>è¯•è¯•è¿™ä¸ªæ —å­ï¼š</strong></p><figure class="highlight arcade"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs arcade"><span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&#x27;global&#x27;</span>)<br><br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>;i &lt;= <span class="hljs-number">5</span>;i ++) &#123;<br>  setTimeout(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(i)<br>  &#125;,i*<span class="hljs-number">1000</span>)<br>  <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(i)<br>&#125;<br><br><span class="hljs-keyword">new</span> Promise(<span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) &#123;<br>  <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&#x27;promise1&#x27;</span>)<br>  resolve()<br> &#125;).then(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&#x27;then1&#x27;</span>)<br>&#125;)<br><br>setTimeout(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&#x27;timeout2&#x27;</span>)<br>  <span class="hljs-keyword">new</span> Promise(<span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) &#123;<br>    <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&#x27;timeout2_promise&#x27;</span>)<br>    resolve()<br>  &#125;).then(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&#x27;timeout2_then&#x27;</span>)<br>  &#125;)<br>&#125;, <span class="hljs-number">1000</span>)<br><br></code></pre></div></td></tr></table></figure><p><strong>ç»“æœï¼š</strong></p><p><img src="https://i.ibb.co/9YbnGCm/image-20220308213843024.png" alt="image-20220308213843024"></p><p><strong>è¯´ä¸ªå†·çŸ¥è¯†ï¼Œæµè§ˆå™¨çš„äº‹ä»¶å¾ªç¯ å’Œ Nodeäº‹ä»¶å¾ªç¯ä¸ä¸€è‡´</strong><a href="https://juejin.cn/post/6844903574560833550">æµè§ˆå™¨å’ŒNodeä¸åŒçš„äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰ - æ˜é‡‘ (juejin.cn)</a></p>]]></content>
    
    
    <categories>
      
      <category>JavaScript</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaScript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Style-Components  æµ…ä½“éªŒ</title>
    <link href="/2022/03/07/Style-Component%20%20%E6%B5%85%E4%BD%93%E9%AA%8C/"/>
    <url>/2022/03/07/Style-Component%20%20%E6%B5%85%E4%BD%93%E9%AA%8C/</url>
    
    <content type="html"><![CDATA[<h2 id="Style-Components-æµ…ä½“éªŒ"><a href="#Style-Components-æµ…ä½“éªŒ" class="headerlink" title="Style-Components  æµ…ä½“éªŒ"></a>Style-Components  æµ…ä½“éªŒ</h2><p><img src="https://styled-components.com/icon.png"></p><blockquote><p>å½“ä½ è¿˜åœ¨çƒ¦æ¼ä½ çš„ <code>css</code> ä¸ºå•¥æ€»æ˜¯ä¼šå½±å“åˆ°å…¶ä»–çš„ç»„ä»¶ï¼Œå¯ä»¥è€ƒè™‘ä¸‹ <code>style-component</code> äº†ï¼å®˜æ–¹ icon å°±å¾ˆé­”æ€§</p></blockquote><h3 id="01-å®‰è£…"><a href="#01-å®‰è£…" class="headerlink" title="01 å®‰è£…"></a>01 å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">$ npm install --save styled-components<br></code></pre></div></td></tr></table></figure><h3 id="02-ç®€å•ä½¿ç”¨ä¸‹"><a href="#02-ç®€å•ä½¿ç”¨ä¸‹" class="headerlink" title="02 ç®€å•ä½¿ç”¨ä¸‹"></a>02 ç®€å•ä½¿ç”¨ä¸‹</h3><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ª <code>style.js</code> æ¥ç¼–å†™ <code>css</code>, å¯¹ï¼ä½ æ²¡æœ‰å¬é”™ï¼Œ<code>css</code> å†™åœ¨ <code>js</code> ä¸­ã€‚</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// style.js</span><br><span class="hljs-keyword">import</span> styled <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;styled-components&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">HelloDiv</span> = styled.<span class="hljs-property">div</span><span class="hljs-string">`</span><br><span class="hljs-string">    width: 200px;</span><br><span class="hljs-string">    text-align: center;</span><br><span class="hljs-string">    background-color: orange;</span><br><span class="hljs-string">    color: yellow;</span><br><span class="hljs-string">    .box &#123;</span><br><span class="hljs-string">        color: blue;</span><br><span class="hljs-string">    &#125;</span><br><span class="hljs-string">`</span><br></code></pre></div></td></tr></table></figure><p>å†ç„¶åï¼ŒæŠŠ <code>style.js</code> å¼•å…¥åˆ° <code>Hello.jsx</code> ï¼Œä½¿ç”¨ <code>HelloDiv</code> ä½œä¸ºæ ‡ç­¾åï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªè¯­ä¹‰åŒ–çš„è‡ªå®šä¹‰æ ‡ç­¾ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-comment">// Hello.jsx</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">HelloDiv</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./style&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Hello</span> () &#123;<br>    <span class="hljs-keyword">return</span>(<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">HelloDiv</span>&gt;</span></span><br><span class="language-xml">             Hello style-components</span><br><span class="language-xml">             <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span></span><br><span class="language-xml">                 æˆ‘æ˜¯ box</span><br><span class="language-xml">             <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">HelloDiv</span>&gt;</span></span><br>    )<br>&#125;<br></code></pre></div></td></tr></table></figure><p>ç„¶åï¼Œå’±ä»¬æ‰“å¼€æ§åˆ¶å°ç§ç§ï¼Œç»™å’± <code> Helloç»„ä»¶</code> èµ·äº†å•¥æ ‡ç­¾å</p><p><img src="https://i.ibb.co/BGLrtbd/image-20220302113342382.png"></p><p>ç¥å¥‡ä¸ï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒï¼Œå†™çš„æ ·å¼å½±å“åˆ°å…¶ä»–çš„ç»„ä»¶å•¦â€¦</p><h3 id="03-æ‰©å±•ï¼šThemeProvider"><a href="#03-æ‰©å±•ï¼šThemeProvider" class="headerlink" title="03 æ‰©å±•ï¼šThemeProvider"></a>03 æ‰©å±•ï¼šThemeProvider</h3><blockquote><p>å‡å¦‚ä½ é¡¹ç›®å½“ä¸‹æˆ–è€…æœªæ¥æœ‰å®šåˆ¶åŒ– <code>theme</code> çš„éœ€æ±‚ï¼Œå¿«æ¥çœ‹è¿™ï¼Œæ¥å¯¹åœ°å•¦ï¼</p></blockquote><p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p><p>é¦–å…ˆä½ éœ€è¦å®šä¹‰ä¸€ä¸ªå­˜æ”¾å®šä¹‰å„ç§å„æ ·çš„ä¸»é¢˜æ ·å¼ <code>theme.js</code></p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// theme.js</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">c_blue</span>: <span class="hljs-string">&quot;#3B81F7&quot;</span>, *<span class="hljs-comment">// è“è‰²*</span><br>  <span class="hljs-attr">c_yellow</span>: <span class="hljs-string">&quot;#FFA800&quot;</span>, *<span class="hljs-comment">// é»„è‰²*</span><br>  <span class="hljs-attr">c_red</span>: <span class="hljs-string">&quot;#FF2121&quot;</span>, *<span class="hljs-comment">// çº¢è‰²*</span><br>  <span class="hljs-attr">c_green</span>: <span class="hljs-string">&quot;#07C160&quot;</span>, *<span class="hljs-comment">// ç»¿è‰²*</span><br>  <span class="hljs-attr">c_white</span>: <span class="hljs-string">&quot;#FFFFFF&quot;</span>, *<span class="hljs-comment">// ç™½è‰²*</span><br>&#125;<br></code></pre></div></td></tr></table></figure><p>ç„¶åï¼Œåœ¨ä½ é¡¹ç›®æœ€æœ€æœ€..æœ€æ ¹æ ‡ç­¾ä¸‹ï¼Œä½¿ç”¨  <code>styled-components</code> æä¾›çš„ ThemeProvider æ ‡ç­¾åŒ…è£¹èµ·æ¥ï¼Œå†æŠŠä½ å®šä¹‰å¥½çš„ <code>theme</code> çš„ä½œä¸º <code>props</code> å¼•å…¥è¿›å»</p><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-comment">// src/index.jsx</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">ThemeProvider</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;styled-components&quot;</span><br><span class="hljs-keyword">import</span> theme <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./theme&quot;</span><br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.StrictMode</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">ThemeProvider</span>  <span class="hljs-attr">theme</span>=<span class="hljs-string">&#123;</span> <span class="hljs-attr">theme</span> &#125;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeProvider</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">React.StrictMode</span>&gt;</span></span>,<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>)<br>);<br><br></code></pre></div></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œä½ å°±æ„‰å¿«åœ°ä½¿ç”¨ä½ åœ¨ <code>theme.js</code>  å®šä¹‰çš„é¢œè‰²</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// Hello/style.js</span><br><span class="hljs-keyword">import</span> styled <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;styled-components&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">HelloDiv</span> = styled.<span class="hljs-property">div</span><span class="hljs-string">`</span><br><span class="hljs-string">    width: 200px;</span><br><span class="hljs-string">    text-align: center;</span><br><span class="hljs-string">    background-color: <span class="hljs-subst">$&#123;p =&gt; p.theme.c_orange&#125;</span>;</span><br><span class="hljs-string">    color: <span class="hljs-subst">$&#123;p =&gt; p.theme.c_yellow&#125;</span> ;</span><br><span class="hljs-string">    .box &#123;</span><br><span class="hljs-string">        color:<span class="hljs-subst">$&#123;p =&gt; p.theme.c_blue&#125;</span> ;</span><br><span class="hljs-string">    &#125;</span><br><span class="hljs-string">`</span><br></code></pre></div></td></tr></table></figure><h3 id="04æ‰©å±•ï¼šcreateGlobalStyle"><a href="#04æ‰©å±•ï¼šcreateGlobalStyle" class="headerlink" title="04æ‰©å±•ï¼šcreateGlobalStyle"></a>04æ‰©å±•ï¼šcreateGlobalStyle</h3><blockquote><p>ç”¨äºè¦†ç›–å…¨å±€æ ·å¼ï¼Œæ¯”å¦‚æƒ³ä¿®æ”¹UI æ¡†æ¶é»˜è®¤çš„æ ·å¼â€¦</p></blockquote><p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p><p>è¿™è¾¹ä»¥ä¿®æ”¹ <code>antd</code> çš„ <code>&lt;Button /&gt;</code> ç»„ä»¶ä¸ºä¾‹ </p><p><img src="https://i.ibb.co/0Ck5WF8/image-20220307170932506.png" alt="image-20220307170932506"></p><p>é¦–å…ˆï¼Œä½¿ç”¨ <code>style-components</code> çš„ <code>createGlobalStyle</code> API åˆ›å»ºä¸€ä¸ªéœ€è¦è¦†ç›–çš„æ ·å¼</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// style.js</span><br><span class="hljs-keyword">import</span> &#123;createGlobalStyle&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;styled-components&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">StyledIndex</span> = createGlobalStyle<span class="hljs-string">`</span><br><span class="hljs-string">    .ant-btn-primary &#123;</span><br><span class="hljs-string">        background-color: orange;</span><br><span class="hljs-string">    &#125;</span><br><span class="hljs-string">`</span><br></code></pre></div></td></tr></table></figure><p>æ¥ç€ï¼Œå¼•ç”¨éœ€è¦çš„è¦†ç›–çš„æ ·å¼çš„ç»„ä»¶ä¸­å»</p><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-comment">// index.js</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">StyledIndex</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./style.js&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Button</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;antd&#x27;</span>;<br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">StyledIndex</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">StyledIndex</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span>&gt;</span>Primary Button<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/&gt;</span></span>,<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;container&#x27;</span>),<br>);<br></code></pre></div></td></tr></table></figure><p>å½“ç»„ä»¶è¢« render çš„æ—¶å€™ï¼Œè¯»åˆ° <code>StyledIndex</code> å°±ä¼šè¢«æ³¨å…¥å…¨å±€æ ·å¼ä¸­å»ï¼Œå˜æˆä¸‹é¢è¿™æ ·â€¦</p><p><img src="https://i.ibb.co/DLJr0vK/image-20220307170743466.png" alt="image-20220307170743466"></p><p><strong>è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯ä½ åªæ˜¯æƒ³å•ç‹¬å®šåˆ¶ï¼Œä½†ä¸å½±å“åˆ°å…¶ä»–ç»„ä»¶çš„æ ·å¼ï¼Œå¯ä»¥è¿™æ ·åšï¼š</strong></p><p>å®šä¹‰ <code>MyButtonç»„ä»¶</code></p><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-comment">// MyButton.jsx</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">StyledIndex</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./style.js&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Button</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;antd&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MyButton</span> (props) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">StyledIndex</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">StyledIndex</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> &#123;<span class="hljs-attr">...props</span>&#125; <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;</span>`<span class="hljs-attr">mybtu</span> $&#123;<span class="hljs-attr">props.className</span> || &#x27;&#x27;&#125;`&#125;&gt;</span>MyButton<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>&#125;<br></code></pre></div></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// style.js</span><br><span class="hljs-keyword">import</span> &#123;createGlobalStyle&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;styled-components&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">StyledIndex</span> = createGlobalStyle<span class="hljs-string">`</span><br><span class="hljs-string">// ç”¨ mybtu ç±»ååŒ…è£¹èµ·æ¥</span><br><span class="hljs-string">    .mybtu &#123;</span><br><span class="hljs-string">      &amp;.ant-btn-primary &#123;</span><br><span class="hljs-string">          background-color: orange;</span><br><span class="hljs-string">      &#125;</span><br><span class="hljs-string">    &#125;</span><br><span class="hljs-string">`</span><br></code></pre></div></td></tr></table></figure><p>ç„¶åå¼•å…¥åˆ° <code>index.js</code> å°±ä¼šå¾—åˆ°ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-comment">// index.js</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Button</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;antd&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">MyButton</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./MyButton.jsx&quot;</span><br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">     <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span>&gt;</span>Primary Button<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml">     <span class="hljs-tag">&lt;<span class="hljs-name">MyButton</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/&gt;</span></span>,<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;container&#x27;</span>),<br>);<br></code></pre></div></td></tr></table></figure><p><img src="https://i.ibb.co/16Y1019/image-20220307171756082.png" alt="image-20220307171756082"></p><h3 id="05-åé¢çš„å­¦ä¹ åˆ°åœ¨ç»§ç»­æ›´æ–°"><a href="#05-åé¢çš„å­¦ä¹ åˆ°åœ¨ç»§ç»­æ›´æ–°" class="headerlink" title="05 åé¢çš„å­¦ä¹ åˆ°åœ¨ç»§ç»­æ›´æ–°"></a>05 åé¢çš„å­¦ä¹ åˆ°åœ¨ç»§ç»­æ›´æ–°</h3><p>ğŸŒŠç¿»æ»šå§åæµªâ€¦</p>]]></content>
    
    
    <categories>
      
      <category>CSS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CSS</tag>
      
      <tag>Style-Components</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>React Hook åˆä½“éªŒ</title>
    <link href="/2022/03/02/React%20Hook%20%E5%88%9D%E4%BD%93%E9%AA%8C/"/>
    <url>/2022/03/02/React%20Hook%20%E5%88%9D%E4%BD%93%E9%AA%8C/</url>
    
    <content type="html"><![CDATA[<h1 id="React-Hook-åˆä½“éªŒ"><a href="#React-Hook-åˆä½“éªŒ" class="headerlink" title="React Hook åˆä½“éªŒ"></a>React Hook åˆä½“éªŒ</h1><h2 id="1-Hook-ç®€ä»‹"><a href="#1-Hook-ç®€ä»‹" class="headerlink" title="1.Hook ç®€ä»‹"></a>1.Hook ç®€ä»‹</h2><p>Hook æ˜¯ä¸€äº›å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶é‡Œâ€œé’©å…¥â€ React state åŠç”Ÿå‘½å‘¨æœŸç­‰ç‰¹æ€§çš„å‡½æ•°ã€‚Hook ä¸èƒ½åœ¨ class ç»„ä»¶ä¸­ä½¿ç”¨ â€”â€” è¿™ä½¿å¾—ä½ ä¸ä½¿ç”¨ class ä¹Ÿèƒ½ä½¿ç”¨ Reactã€‚</p><h2 id="2-åŠ¨æœº"><a href="#2-åŠ¨æœº" class="headerlink" title="2.åŠ¨æœº"></a>2.åŠ¨æœº</h2><p><a href="https://react.docschina.org/docs/hooks-intro.html#motivation">å®˜æ–¹è§£é‡Šï¼š</a></p><ol><li>ç»„ä»¶ä¹‹é—´å¤ç”¨çŠ¶æ€é€»è¾‘å¾ˆéš¾</li><li>å¤æ‚ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£</li><li>éš¾ä»¥ç†è§£çš„ class</li></ol><h2 id="3-Hook-è§„åˆ™"><a href="#3-Hook-è§„åˆ™" class="headerlink" title="3.Hook è§„åˆ™"></a>3.Hook è§„åˆ™</h2><h4 id="åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨-Hook"><a href="#åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨-Hook" class="headerlink" title="åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨ Hook"></a>åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨ Hook</h4><blockquote><p><strong>ä¸è¦åœ¨å¾ªç¯ï¼Œæ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ Hookï¼Œ</strong> ç¡®ä¿æ€»æ˜¯åœ¨ä½ çš„ React å‡½æ•°çš„æœ€é¡¶å±‚è°ƒç”¨ä»–ä»¬ã€‚</p></blockquote><h4 id="åªåœ¨-React-å‡½æ•°ä¸­è°ƒç”¨-Hook"><a href="#åªåœ¨-React-å‡½æ•°ä¸­è°ƒç”¨-Hook" class="headerlink" title="åªåœ¨ React å‡½æ•°ä¸­è°ƒç”¨ Hook"></a>åªåœ¨ React å‡½æ•°ä¸­è°ƒç”¨ Hook</h4><p><strong>ä¸è¦åœ¨æ™®é€šçš„ JavaScript å‡½æ•°ä¸­è°ƒç”¨ Hookã€‚</strong>ä½ å¯ä»¥ï¼š</p><ul><li>âœ… åœ¨ React çš„å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨ Hook</li><li>âœ… åœ¨è‡ªå®šä¹‰ Hook ä¸­è°ƒç”¨å…¶ä»– Hook</li></ul><h2 id="4-åŸºç¡€-Hook"><a href="#4-åŸºç¡€-Hook" class="headerlink" title="4.åŸºç¡€ Hook"></a>4.åŸºç¡€ Hook</h2><h3 id="useState"><a href="#useState" class="headerlink" title="useState"></a>useState</h3><p>function ç»„ä»¶ç¤ºä¾‹ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Example</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-comment">// å£°æ˜ä¸€ä¸ªå« &quot;count&quot; çš„ state å˜é‡</span><br>  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>You clicked &#123;count&#125; times<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;Click me<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br></code></pre></div></td></tr></table></figure><p>ç­‰ä»·çš„ Class ç¤ºä¾‹ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Example</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props)<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>You clicked &#123;this.state.count&#125; times<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> this.setState(&#123; count: this.state.count + 1 &#125;)&#125;&gt;</span><br><span class="language-xml">          Click me</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><h3 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h3><blockquote><p><em>Effect Hook</em> å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Example</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)<br><br>  <span class="hljs-comment">// Similar to componentDidMount and componentDidUpdate:</span><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-comment">// Update the document title using the browser API</span><br>    <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-string">`You clicked <span class="hljs-subst">$&#123;count&#125;</span> times`</span><br>  &#125;)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>You clicked &#123;count&#125; times<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;Click me<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br></code></pre></div></td></tr></table></figure><blockquote><p>æç¤º</p><p>å¦‚æœä½ ç†Ÿæ‚‰ React class çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œä½ å¯ä»¥æŠŠ <code>useEffect</code> Hook çœ‹åš <code>componentDidMount</code>ï¼Œ<code>componentDidUpdate</code> å’Œ <code>componentWillUnmount</code> è¿™ä¸‰ä¸ªå‡½æ•°çš„ç»„åˆã€‚</p></blockquote><h4 id="æ— éœ€æ¸…é™¤çš„-effect"><a href="#æ— éœ€æ¸…é™¤çš„-effect" class="headerlink" title="æ— éœ€æ¸…é™¤çš„ effect"></a>æ— éœ€æ¸…é™¤çš„ effect</h4><p>ä½¿ç”¨ class çš„ç¤ºä¾‹ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-comment">// å®æ—¶æ›´æ–°æ ‡ç­¾é¡µ title</span><br><span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-string">`You clicked <span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.state.count&#125;</span> times`</span>;<br>&#125;<br><span class="hljs-title function_">componentDidUpdate</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-string">`You clicked <span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.state.count&#125;</span> times`</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>å½“ä½ ä½¿ç”¨ hookï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-comment">// å½“ç»„ä»¶é‡æ–°æ¸²æŸ“ä¹‹åå°±ä¼šæ‰§è¡Œ</span><br><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-string">`You clicked <span class="hljs-subst">$&#123;count&#125;</span> times`</span><br>&#125;)<br></code></pre></div></td></tr></table></figure><h4 id="éœ€è¦æ¸…é™¤çš„-effect"><a href="#éœ€è¦æ¸…é™¤çš„-effect" class="headerlink" title="éœ€è¦æ¸…é™¤çš„ effect"></a>éœ€è¦æ¸…é™¤çš„ effect</h4><p>ä½¿ç”¨ class çš„ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// é€šå¸¸ä¼šåœ¨ componentDidMount ä¸­è®¾ç½®è®¢é˜…ï¼Œå¹¶åœ¨ componentWillUnmount ä¸­æ¸…é™¤å®ƒã€‚ä¾‹å¦‚ï¼šè®¢é˜…-å‘å¸ƒ</span><br><span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"></span>) &#123;<br>     <span class="hljs-title class_">ChatAPI</span>.<span class="hljs-title function_">subscribeToFriendStatus</span>(<br>         <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">friend</span>.<span class="hljs-property">id</span>,<br>     );<br> &#125;<br><span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title class_">ChatAPI</span>.<span class="hljs-title function_">unsubscribeFromFriendStatus</span>(<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">friend</span>.<span class="hljs-property">id</span>,<br>    );<br>&#125;<br></code></pre></div></td></tr></table></figure><p>å½“ä½ ä½¿ç”¨ hookï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// effect ä¸­è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™æ˜¯ effect å¯é€‰çš„æ¸…é™¤æœºåˆ¶ã€‚æ¯ä¸ª effect éƒ½å¯ä»¥è¿”å›ä¸€ä¸ªæ¸…é™¤å‡½æ•°ã€‚React ä¼šåœ¨ç»„ä»¶å¸è½½çš„æ—¶å€™æ‰§è¡Œæ¸…é™¤æ“ä½œã€‚æ­£å¦‚ä¹‹å‰å­¦åˆ°çš„ï¼Œeffect åœ¨æ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ React ä¼šåœ¨æ‰§è¡Œå½“å‰ effect ä¹‹å‰å¯¹ä¸Šä¸€ä¸ª effect è¿›è¡Œæ¸…é™¤ã€‚</span><br><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-title class_">ChatAPI</span>.<span class="hljs-title function_">subscribeToFriendStatus</span>(props.<span class="hljs-property">friend</span>.<span class="hljs-property">id</span>)<br>  <span class="hljs-comment">// æ¸…é™¤è®¢é˜…</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-title class_">ChatAPI</span>.<span class="hljs-title function_">unsubscribeFromFriendStatus</span>(props.<span class="hljs-property">friend</span>.<span class="hljs-property">id</span>)<br>  &#125;<br>&#125;)<br></code></pre></div></td></tr></table></figure><h2 id="5-é¢å¤–çš„-Hook"><a href="#5-é¢å¤–çš„-Hook" class="headerlink" title="5.é¢å¤–çš„ Hook"></a>5.é¢å¤–çš„ Hook</h2><h2 id="6-è‡ªå®šä¹‰-Hook"><a href="#6-è‡ªå®šä¹‰-Hook" class="headerlink" title="6.è‡ªå®šä¹‰ Hook"></a>6.è‡ªå®šä¹‰ Hook</h2>]]></content>
    
    
    <categories>
      
      <category>React</category>
      
    </categories>
    
    
    <tags>
      
      <tag>React</tag>
      
      <tag>React-Hook</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>npx åˆ‡æ¢ä¸åŒç‰ˆæœ¬çš„ node ğŸ˜²</title>
    <link href="/2022/02/25/npx%20%E5%88%87%E6%8D%A2%E4%B8%8D%E5%90%8C%E7%89%88%E6%9C%AC%E7%9A%84%20node%20%F0%9F%98%B2/"/>
    <url>/2022/02/25/npx%20%E5%88%87%E6%8D%A2%E4%B8%8D%E5%90%8C%E7%89%88%E6%9C%AC%E7%9A%84%20node%20%F0%9F%98%B2/</url>
    
    <content type="html"><![CDATA[<h2 id="npx-åˆ‡æ¢ä¸åŒç‰ˆæœ¬çš„-node-ğŸ˜²"><a href="#npx-åˆ‡æ¢ä¸åŒç‰ˆæœ¬çš„-node-ğŸ˜²" class="headerlink" title="npx åˆ‡æ¢ä¸åŒç‰ˆæœ¬çš„ node ğŸ˜²"></a>npx åˆ‡æ¢ä¸åŒç‰ˆæœ¬çš„ node ğŸ˜²</h2><p>å¶ç„¶å‘ç° <code>node</code> çš„ <code>npx</code> å¯ä»¥åˆ‡æ¢ä¸åŒç‰ˆæœ¬çš„ <code>node</code>,å¦¥å¦¥çš„ node ç‰ˆæœ¬ç®¡ç†å·¥å…·ã€‚ä¹‹å‰ä¹Ÿè¯•è¿‡ <code>nvm</code> ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œä¸ªäººæ„Ÿè§‰ <code>npx</code> æ›´æ–¹ä¾¿ç‚¹ã€‚</p><h3 id="01-åŸç†"><a href="#01-åŸç†" class="headerlink" title="01 åŸç†"></a>01 åŸç†</h3><blockquote><p>åˆ©ç”¨ npx å¯ä»¥ä¸‹è½½æ¨¡å—è¿™ä¸ªç‰¹ç‚¹ï¼Œå¯ä»¥æŒ‡å®šæŸä¸ªç‰ˆæœ¬çš„ Node è¿è¡Œè„šæœ¬ã€‚å®ƒçš„çªé—¨å°±æ˜¯ä½¿ç”¨ npm çš„ <a href="https://www.npmjs.com/package/node">node æ¨¡å—</a>ã€‚</p></blockquote><p>å…·ä½“çš„ <code>npx</code> è¯­æ³•ï¼Œå¯ä»¥å‚è€ƒé˜®ä¸€å³°è€å¸ˆï¼Œ[æ­¤å¤„](<a href="http://www.ruanyifeng.com/blog/2019/02/npx.html">npx ä½¿ç”¨æ•™ç¨‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— (ruanyifeng.com)</a>)</p><h3 id="02-ç¤ºä¾‹"><a href="#02-ç¤ºä¾‹" class="headerlink" title="02 ç¤ºä¾‹"></a>02 ç¤ºä¾‹</h3><p>æ¨¡æ‹Ÿä¸€ä¸ªéœ€è¦ <code>node@12.xx.xx</code> æ‰èƒ½å¯åŠ¨çš„é¡¹ç›®</p><p>ä½¿ç”¨ npx ä¸‹è½½å¯¹åº” node ç‰ˆæœ¬æ¨¡å—</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">$ npx node@12.9.1 -v<br>v12.9.1<br></code></pre></div></td></tr></table></figure><p>æ‰¾åˆ°éœ€è¦å¯åŠ¨é¡¹ç›®çš„ç›®å½•ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">$ npx -p node@12.9.1 npm start<br></code></pre></div></td></tr></table></figure><p>é¡¹ç›®å¯åŠ¨æˆåŠŸâ€¦</p>]]></content>
    
    
    <categories>
      
      <category>Node</category>
      
    </categories>
    
    
    <tags>
      
      <tag>npx</tag>
      
      <tag>node</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TypeScript é‚£äº›äº‹å„¿</title>
    <link href="/2022/02/21/TypeScript%20%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/"/>
    <url>/2022/02/21/TypeScript%20%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/</url>
    
    <content type="html"><![CDATA[<h2 id="TypeScript-é‚£äº›äº‹å„¿"><a href="#TypeScript-é‚£äº›äº‹å„¿" class="headerlink" title="TypeScript é‚£äº›äº‹å„¿"></a>TypeScript é‚£äº›äº‹å„¿</h2><h3 id="01-å˜é‡ç±»å‹-ğŸ˜Š"><a href="#01-å˜é‡ç±»å‹-ğŸ˜Š" class="headerlink" title="01 å˜é‡ç±»å‹ ğŸ˜Š"></a>01 å˜é‡ç±»å‹ ğŸ˜Š</h3><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">let</span> å˜é‡å : å˜é‡ç±»å‹ = value<br><span class="hljs-keyword">function</span> (<span class="hljs-params"> å˜é‡åï¼šå˜é‡ç±»å‹ </span>): å˜é‡ç±»å‹&#123;&#125;<br></code></pre></div></td></tr></table></figure><h4 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h4><table><thead><tr><th>ç±»å‹</th><th>ä¾‹å­</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td>number</td><td>1,22,2.5</td><td align="center">ä»»æ„æ•°å­—</td></tr><tr><td>string</td><td>â€˜DuoRâ€™,â€bbbâ€</td><td align="center">ä»»æ„å­—ç¬¦ä¸²</td></tr><tr><td>boolean</td><td>true,false</td><td align="center"></td></tr><tr><td>å­—é¢é‡</td><td>å…¶æœ¬èº«</td><td align="center">é™åˆ¶å˜é‡çš„å€¼å°±æ˜¯è¯¥å­—é¢é‡çš„å€¼</td></tr><tr><td>any</td><td>*</td><td align="center">ä»»æ„ç±»å‹</td></tr><tr><td>unknown</td><td>*</td><td align="center">ç±»å‹å®‰å…¨çš„ any</td></tr><tr><td>void</td><td>ç©ºå€¼ undefined</td><td align="center">æ²¡æœ‰å€¼</td></tr><tr><td>never</td><td>æ²¡æœ‰å€¼</td><td align="center">ä¸èƒ½æ˜¯ä»»ä½•å€¼</td></tr><tr><td>object</td><td>å¯¹è±¡å€¼</td><td align="center">js Object</td></tr><tr><td>array</td><td>[1,2,3,]</td><td align="center">js array</td></tr><tr><td>tuple</td><td>[4,5]</td><td align="center">å…ƒç»„ï¼Œè¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„</td></tr><tr><td>enum</td><td>enum{A,B}</td><td align="center">æšä¸¾</td></tr><tr><td>è”åˆå£°æ˜</td><td>boolean | string</td><td align="center">å¯ä»¥æ˜¯ boolean å’Œ string ç±»å‹</td></tr></tbody></table><ul><li><p>å˜é‡ç±»å‹ä¹‹é—´æ˜¯ä¸å¯ä»¥äº’ç›¸èµ‹å€¼çš„ï¼Œå¦åˆ™ä¼šæŠ¥é”™</p></li><li><p>å£°æ˜å’Œèµ‹å€¼æ˜¯åŒæ—¶è¿›è¡Œçš„ï¼ŒTS å¯ä»¥è‡ªåŠ¨å¯¹ç±»å‹è¿›è¡Œæ£€æµ‹,å¯ä»¥çœç•¥å®šä¹‰ç±»å‹çš„æ­¥éª¤</p></li><li><p>ç±»å‹æ–­è¨€ï¼Œ<code>å˜é‡1 = &lt;å˜é‡ç±»å‹&gt; å˜é‡å2 æˆ– å˜é‡1 = å˜é‡å2 as å˜é‡ç±»å‹</code></p></li><li><p>ç±»å‹çš„åˆ«å, <code>type è‡ªå®šä¹‰ç±»å‹å = å˜é‡ç±»å‹ï¼ˆ|ï¼Œ&amp;ï¼‰</code></p></li><li><p>typescrpt 3.4 å¼•å…¥ readonly, ä¿®é¥°åï¼Œå˜é‡åªè¯»:</p></li></ul><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-attr">arr</span>: readonly string[]= [<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;2&#x27;</span>,<span class="hljs-string">&#x27;3&#x27;</span>]<br></code></pre></div></td></tr></table></figure><p><strong>æ³¨æ„ç‚¹ï¼š</strong></p><p>a. åœ¨ <code>tsconfig.json</code> æŒ‡å®šäº†<code>&quot;strictNullChecks&quot;:false</code>ï¼Œ<code>undefined</code> ä¸ <code>null</code> æ˜¯å¯ä»¥èµ‹å€¼åˆ°å…¶ä»–ç±»å‹çš„ï¼ˆstring/numâ€¦ï¼‰,å¦åˆ™ï¼Œ<code>null</code> å’Œ <code>undefined</code> åªèƒ½èµ‹å€¼ç»™ <code>void</code> å’Œå®ƒä»¬å„è‡ªçš„ç±»å‹ã€‚</p><p>b. <code>number</code> å’Œ <code>bigint</code> éƒ½æ˜¯è¡¨ç¤ºæ•°å­—ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªç±»<code>ç›¸äº’ä¸å…¼å®¹çš„</code></p><h4 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h4><figure class="highlight tsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs tsx"><span class="hljs-comment">// å‡½æ•°å£°æ˜</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">sum</span>(<span class="hljs-params">num1: <span class="hljs-built_in">number</span>, num2: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> &#123;<br>  <span class="hljs-keyword">return</span> num1 + num2<br>&#125;<br><br><span class="hljs-comment">// å‡½æ•°è¡¨è¾¾å¼</span><br><span class="hljs-title function_">sum</span>(<span class="hljs-number">98</span>, <span class="hljs-number">29</span>)<br><br><span class="hljs-keyword">let</span> sub = (<span class="hljs-attr">num1</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">num2</span>: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> num1 - num2<br>&#125;<br><span class="hljs-title function_">sub</span>(<span class="hljs-number">98</span>, <span class="hljs-number">29</span>)<br><br><span class="hljs-comment">// å‡½æ•°é‡è½½</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Types</span> = <span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">string</span>, b: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">string</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">string</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: Types, b: Types</span>) &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> a === <span class="hljs-string">&#x27;string&#x27;</span> || <span class="hljs-keyword">typeof</span> b === <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>    <span class="hljs-keyword">return</span> a.<span class="hljs-title function_">toString</span>() + b.<span class="hljs-title function_">toString</span>()<br>  &#125;<br>  <span class="hljs-keyword">return</span> a + b<br>&#125;<br><span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>).<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br></code></pre></div></td></tr></table></figure><h4 id="ç‰¹åˆ«çš„ç±»å‹"><a href="#ç‰¹åˆ«çš„ç±»å‹" class="headerlink" title="ç‰¹åˆ«çš„ç±»å‹"></a>ç‰¹åˆ«çš„ç±»å‹</h4><h5 id="never"><a href="#never" class="headerlink" title="never"></a>never</h5><blockquote><p>è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹</p></blockquote><p>ä¸¤ç§æƒ…å†µï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs tsx"><span class="hljs-comment">// å¼‚å¸¸</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">err</span>(<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">never</span> &#123;<br>  <span class="hljs-comment">// OK</span><br>  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(msg)<br>&#125;<br><br><span class="hljs-comment">// æ­»å¾ªç¯</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">loopForever</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">never</span> &#123;<br>  <span class="hljs-comment">// OK</span><br>  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;&#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>ç‰¹åˆ«ç”¨æ³•ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs tsx"><span class="hljs-comment">// åˆ©ç”¨ never ç±»å‹çš„ç‰¹æ€§æ¥å®ç°å…¨é¢æ€§æ£€æŸ¥</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Foo</span> = <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">controlFlowAnalysisWithNever</span>(<span class="hljs-params">foo: Foo</span>) &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> foo === <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>    <span class="hljs-comment">// è¿™é‡Œ foo è¢«æ”¶çª„ä¸º string ç±»å‹</span><br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> foo === <span class="hljs-string">&#x27;number&#x27;</span>) &#123;<br>    <span class="hljs-comment">// è¿™é‡Œ foo è¢«æ”¶çª„ä¸º number ç±»å‹</span><br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">// foo åœ¨è¿™é‡Œæ˜¯ never</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-attr">check</span>: <span class="hljs-built_in">never</span> = foo<br>  &#125;<br>&#125;<br><span class="hljs-comment">// å‡å¦‚å“ªä¸€å¤©Fooæ–°å¢booleanï¼Œtså°±ä¼šæŠ›å‡ºä¸€ä¸ªäº§ç”Ÿä¸€ä¸ªç¼–è¯‘é”™è¯¯ã€‚ç¡®ä¿ controlFlowAnalysisWithNever æ–¹æ³•æ€»æ˜¯ç©·å°½äº† Foo çš„æ‰€æœ‰å¯èƒ½ç±»å‹ã€‚</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Foo</span> = <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span><br><span class="hljs-comment">// ä½¿ç”¨ never é¿å…å‡ºç°æ–°å¢äº†è”åˆç±»å‹æ²¡æœ‰å¯¹åº”çš„å®ç°ï¼Œç›®çš„å°±æ˜¯å†™å‡ºç±»å‹ç»å¯¹å®‰å…¨çš„ä»£ç ã€‚</span><br></code></pre></div></td></tr></table></figure><h5 id="unknown"><a href="#unknown" class="headerlink" title="unknown"></a>unknown</h5><blockquote><p>unknown<code>ä¸</code>any<code>çš„æœ€å¤§åŒºåˆ«æ˜¯ï¼š ä»»ä½•ç±»å‹çš„å€¼å¯ä»¥èµ‹å€¼ç»™</code>any<code>ï¼ŒåŒæ—¶</code>any<code>ç±»å‹çš„å€¼ä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ã€‚</code>unknown<code> ä»»ä½•ç±»å‹çš„å€¼éƒ½å¯ä»¥èµ‹å€¼ç»™å®ƒï¼Œä½†å®ƒåªèƒ½èµ‹å€¼ç»™</code>unknown<code>å’Œ</code>any</p></blockquote><figure class="highlight tsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs tsx"><span class="hljs-comment">// è¿™ç§æœºåˆ¶èµ·åˆ°äº†å¾ˆå¼ºçš„é¢„é˜²æ€§ï¼Œæ›´å®‰å…¨ï¼Œè¿™å°±è¦æ±‚æˆ‘ä»¬å¿…é¡»ç¼©å°ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨typeofã€ç±»å‹æ–­è¨€ç­‰æ–¹å¼æ¥ç¼©å°æœªçŸ¥èŒƒå›´ï¼š</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getDogName</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">let</span> <span class="hljs-attr">x</span>: unknown<br>  <span class="hljs-keyword">return</span> x<br>&#125;<br><span class="hljs-keyword">const</span> dogName = <span class="hljs-title function_">getDogName</span>()<br><span class="hljs-comment">// ç›´æ¥ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> upName = dogName.<span class="hljs-title function_">toLowerCase</span>() <span class="hljs-comment">// Error</span><br><span class="hljs-comment">// typeof</span><br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> dogName === <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>  <span class="hljs-keyword">const</span> upName = dogName.<span class="hljs-title function_">toLowerCase</span>() <span class="hljs-comment">// OK</span><br>&#125;<br><span class="hljs-comment">// ç±»å‹æ–­è¨€</span><br><span class="hljs-keyword">const</span> upName = (dogName <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>).<span class="hljs-title function_">toLowerCase</span>() <span class="hljs-comment">// OK</span><br></code></pre></div></td></tr></table></figure><h5 id="Numberã€Stringã€Booleanã€Symbol"><a href="#Numberã€Stringã€Booleanã€Symbol" class="headerlink" title="Numberã€Stringã€Booleanã€Symbol"></a>Numberã€Stringã€Booleanã€Symbol</h5><blockquote><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹åˆå­¦ TypeScript æ—¶ï¼Œå¾ˆå®¹æ˜“å’ŒåŸå§‹ç±»å‹ numberã€stringã€booleanã€symbol æ··æ·†çš„é¦–å­—æ¯å¤§å†™çš„ Numberã€Stringã€Booleanã€Symbol ç±»å‹ï¼Œåè€…æ˜¯ç›¸åº”åŸå§‹ç±»å‹çš„<code>åŒ…è£…å¯¹è±¡</code>ï¼Œå§‘ä¸”æŠŠå®ƒä»¬ç§°ä¹‹ä¸ºå¯¹è±¡ç±»å‹ã€‚</p></blockquote><p>ä»ç±»å‹å…¼å®¹æ€§ä¸Šçœ‹ï¼ŒåŸå§‹ç±»å‹å…¼å®¹å¯¹åº”çš„å¯¹è±¡ç±»å‹ï¼Œåè¿‡æ¥å¯¹è±¡ç±»å‹ä¸å…¼å®¹å¯¹åº”çš„åŸå§‹ç±»å‹ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸ªå…·ä½“çš„ç¤ºä¾‹ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs tsx"><span class="hljs-keyword">let</span> <span class="hljs-attr">num</span>: <span class="hljs-built_in">number</span><br><span class="hljs-keyword">let</span> <span class="hljs-title class_">Num</span>: <span class="hljs-title class_">Number</span><br><span class="hljs-title class_">Num</span> = num <span class="hljs-comment">// ok</span><br>num = <span class="hljs-title class_">Num</span> <span class="hljs-comment">// ts(2322)æŠ¥é”™</span><br></code></pre></div></td></tr></table></figure><p><strong>æ­¤ï¼Œæˆ‘ä»¬éœ€è¦é“­è®°ä¸è¦ä½¿ç”¨å¯¹è±¡ç±»å‹æ¥æ³¨è§£å€¼çš„ç±»å‹ï¼Œå› ä¸ºè¿™æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚</strong></p><h5 id="objectã€Object-å’Œ"><a href="#objectã€Object-å’Œ" class="headerlink" title="objectã€Object å’Œ {}"></a>objectã€Object å’Œ {}</h5><blockquote><p>å¦å¤–ï¼Œobjectï¼ˆé¦–å­—æ¯å°å†™ï¼Œä»¥ä¸‹ç§°â€œå° objectâ€ï¼‰ã€Objectï¼ˆé¦–å­—æ¯å¤§å†™ï¼Œä»¥ä¸‹ç§°â€œå¤§ Objectâ€ï¼‰å’Œ {}ï¼ˆä»¥ä¸‹ç§°â€œç©ºå¯¹è±¡â€ï¼‰</p></blockquote><p>å° object ä»£è¡¨çš„æ˜¯æ‰€æœ‰éåŸå§‹ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¸èƒ½æŠŠ numberã€stringã€booleanã€symbol ç­‰ åŸå§‹ç±»å‹èµ‹å€¼ç»™ objectã€‚åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ<code>null</code> å’Œ <code>undefined</code> ç±»å‹ä¹Ÿä¸èƒ½èµ‹ç»™ objectã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs tsx"><span class="hljs-comment">// object</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">lowerCaseObject</span>: <span class="hljs-built_in">object</span><br>lowerCaseObject = <span class="hljs-number">1</span> <span class="hljs-comment">// ts(2322)</span><br>lowerCaseObject = <span class="hljs-string">&#x27;a&#x27;</span> <span class="hljs-comment">// ts(2322)</span><br>lowerCaseObject = <span class="hljs-literal">true</span> <span class="hljs-comment">// ts(2322)</span><br>lowerCaseObject = <span class="hljs-literal">null</span> <span class="hljs-comment">// ts(2322)</span><br>lowerCaseObject = <span class="hljs-literal">undefined</span> <span class="hljs-comment">// ts(2322)</span><br>lowerCaseObject = &#123;&#125; <span class="hljs-comment">// ok</span><br></code></pre></div></td></tr></table></figure><p>å¤§ Object ä»£è¡¨æ‰€æœ‰æ‹¥æœ‰ toStringã€hasOwnProperty æ–¹æ³•çš„ç±»å‹ï¼Œæ‰€ä»¥æ‰€æœ‰åŸå§‹ç±»å‹ã€éåŸå§‹ç±»å‹éƒ½å¯ä»¥èµ‹ç»™ Objectã€‚åŒæ ·ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œnull å’Œ undefined ç±»å‹ä¹Ÿä¸èƒ½èµ‹ç»™ Objectã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs tsx"><span class="hljs-comment">// Object</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">upperCaseObject</span>: <span class="hljs-title class_">Object</span><br>upperCaseObject = <span class="hljs-number">1</span> <span class="hljs-comment">// ok</span><br>upperCaseObject = <span class="hljs-string">&#x27;a&#x27;</span> <span class="hljs-comment">// ok</span><br>upperCaseObject = <span class="hljs-literal">true</span> <span class="hljs-comment">// ok</span><br>upperCaseObject = <span class="hljs-literal">null</span> <span class="hljs-comment">// ts(2322)</span><br>upperCaseObject = <span class="hljs-literal">undefined</span> <span class="hljs-comment">// ts(2322)</span><br>upperCaseObject = &#123;&#125; <span class="hljs-comment">// ok</span><br></code></pre></div></td></tr></table></figure><p><strong>ç»¼ä¸Šç»“è®ºï¼š{}ã€å¤§ Object æ˜¯æ¯”å° object æ›´å®½æ³›çš„ç±»å‹ï¼ˆleast specificï¼‰ï¼Œ{} å’Œå¤§ Object å¯ä»¥äº’ç›¸ä»£æ›¿ï¼Œç”¨æ¥è¡¨ç¤ºåŸå§‹ç±»å‹ï¼ˆnullã€undefined é™¤å¤–ï¼‰å’ŒéåŸå§‹ç±»å‹ï¼›è€Œå° object åˆ™è¡¨ç¤ºéåŸå§‹ç±»å‹ã€‚</strong></p><h5 id="å­—é¢é‡"><a href="#å­—é¢é‡" class="headerlink" title="å­—é¢é‡"></a>å­—é¢é‡</h5><blockquote><p>åœ¨ TypeScript ä¸­ï¼Œå­—é¢é‡ä¸ä»…å¯ä»¥è¡¨ç¤ºå€¼ï¼Œè¿˜å¯ä»¥è¡¨ç¤ºç±»å‹ï¼Œå³æ‰€è°“çš„å­—é¢é‡ç±»å‹ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// ç›®å‰ï¼ŒTypeScript æ”¯æŒ 3 ç§å­—é¢é‡ç±»å‹ï¼šå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ã€æ•°å­—å­—é¢é‡ç±»å‹ã€å¸ƒå°”å­—é¢é‡ç±»å‹</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">specifiedStr</span>: <span class="hljs-string">&#x27;this is string&#x27;</span> = <span class="hljs-string">&#x27;this is string&#x27;</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">specifiedNum</span>: <span class="hljs-number">1</span> = <span class="hljs-number">1</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">specifiedBoolean</span>: <span class="hljs-literal">true</span> = <span class="hljs-literal">true</span><br></code></pre></div></td></tr></table></figure><p>åº”ç”¨åœºæ™¯ï¼š</p><p>æ¯”å¦‚å£°æ˜å¦‚ä¸‹æ‰€ç¤ºçš„ä¸€ä¸ªç±»å‹ Configï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js">interface <span class="hljs-title class_">Config</span> &#123;<br>  <span class="hljs-attr">size</span>: <span class="hljs-string">&#x27;small&#x27;</span> | <span class="hljs-string">&#x27;big&#x27;</span>;<br>  <span class="hljs-attr">isEnable</span>: <span class="hljs-literal">true</span> | <span class="hljs-literal">false</span>;<br>  <span class="hljs-attr">margin</span>: <span class="hljs-number">0</span> | <span class="hljs-number">2</span> | <span class="hljs-number">4</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>éœ€è¦æ³¨æ„ :</p><p>åœ¨ç¼ºçœç±»å‹æ³¨è§£çš„æƒ…å†µä¸‹ï¼ŒTypeScript æ¨æ–­å‡ºå®ƒçš„ç±»å‹ç›´æ¥ç”±èµ‹å€¼å­—é¢é‡çš„ç±»å‹å†³å®š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">const</span> str = <span class="hljs-string">&#x27;this is string&#x27;</span> <span class="hljs-comment">// str: &#x27;this is string&#x27;</span><br><span class="hljs-keyword">const</span> num = <span class="hljs-number">1</span> <span class="hljs-comment">// num: 1</span><br><span class="hljs-keyword">const</span> bool = <span class="hljs-literal">true</span> <span class="hljs-comment">// bool: true</span><br></code></pre></div></td></tr></table></figure><h3 id="02-ts-ä¸“ä¸šåè¯-ğŸ§"><a href="#02-ts-ä¸“ä¸šåè¯-ğŸ§" class="headerlink" title="02 ts ä¸“ä¸šåè¯ ğŸ§"></a>02 ts ä¸“ä¸šåè¯ ğŸ§</h3><h4 id="ç±»å‹æ¨æ–­"><a href="#ç±»å‹æ¨æ–­" class="headerlink" title="ç±»å‹æ¨æ–­"></a>ç±»å‹æ¨æ–­</h4><blockquote><p>åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼ŒTypeScript ä¼šæ ¹æ®ä¸Šä¸‹æ–‡ç¯å¢ƒè‡ªåŠ¨æ¨æ–­å‡ºå˜é‡çš„ç±»å‹ï¼Œæ— é¡»æˆ‘ä»¬å†å†™æ˜ç±»å‹æ³¨è§£ã€‚</p></blockquote><figure class="highlight tsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs tsx"><span class="hljs-keyword">let</span> <span class="hljs-attr">str</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">&#x27;I am a string&#x27;</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">num</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">bool</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span><br><span class="hljs-comment">// ç®€åŒ–å -----&gt;</span><br><span class="hljs-keyword">let</span> str = <span class="hljs-string">&#x27;I am a string&#x27;</span><br><span class="hljs-keyword">let</span> num = <span class="hljs-number">1</span><br><span class="hljs-keyword">let</span> bool = <span class="hljs-literal">true</span><br></code></pre></div></td></tr></table></figure><p>æˆ‘ä»¬æŠŠ TypeScript è¿™ç§åŸºäºèµ‹å€¼è¡¨è¾¾å¼æ¨æ–­ç±»å‹çš„èƒ½åŠ›ç§°ä¹‹ä¸º<code>ç±»å‹æ¨æ–­</code></p><p>åœ¨ TypeScript ä¸­ï¼Œå…·æœ‰åˆå§‹åŒ–å€¼çš„å˜é‡ã€æœ‰é»˜è®¤å€¼çš„å‡½æ•°å‚æ•°ã€å‡½æ•°è¿”å›çš„ç±»å‹éƒ½å¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡æ¨æ–­å‡ºæ¥ã€‚æ¯”å¦‚æˆ‘ä»¬èƒ½æ ¹æ® return è¯­å¥æ¨æ–­å‡½æ•°è¿”å›çš„ç±»å‹ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs tsx"><span class="hljs-comment">/** æ ¹æ®å‚æ•°çš„ç±»å‹ï¼Œæ¨æ–­å‡ºè¿”å›å€¼çš„ç±»å‹ä¹Ÿæ˜¯ number */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add1</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> a + b<br>&#125;<br><span class="hljs-keyword">const</span> x1 = <span class="hljs-title function_">add1</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>) <span class="hljs-comment">// æ¨æ–­å‡º x1 çš„ç±»å‹ä¹Ÿæ˜¯ number</span><br><br><span class="hljs-comment">/** æ¨æ–­å‚æ•° b çš„ç±»å‹æ˜¯æ•°å­—æˆ–è€… undefinedï¼Œè¿”å›å€¼çš„ç±»å‹ä¹Ÿæ˜¯æ•°å­— */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add2</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b = <span class="hljs-number">1</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> a + b<br>&#125;<br><span class="hljs-keyword">const</span> x2 = <span class="hljs-title function_">add2</span>(<span class="hljs-number">1</span>)<br><span class="hljs-keyword">const</span> x3 = <span class="hljs-title function_">add2</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;1&#x27;</span>) <span class="hljs-comment">// ts(2345) Argument of type &quot;1&quot; is not assignable to parameter of type &#x27;number | undefined</span><br></code></pre></div></td></tr></table></figure><p>ä½†ï¼å¦‚æœå®šä¹‰çš„æ—¶å€™æ²¡æœ‰èµ‹å€¼ï¼Œä¸ç®¡ä¹‹åæœ‰æ²¡æœ‰èµ‹å€¼ï¼Œéƒ½ä¼šè¢«æ¨æ–­æˆ any ç±»å‹è€Œå®Œå…¨ä¸è¢«ç±»å‹æ£€æŸ¥ã€‚</p><h4 id="ç±»å‹æ–­è¨€"><a href="#ç±»å‹æ–­è¨€" class="headerlink" title="ç±»å‹æ–­è¨€"></a>ç±»å‹æ–­è¨€</h4><p>TypeScript ç±»å‹æ£€æµ‹æ— æ³•åšåˆ°ç»å¯¹æ™ºèƒ½ï¼Œæ¯•ç«Ÿç¨‹åºä¸èƒ½åƒäººä¸€æ ·æ€è€ƒã€‚æœ‰æ—¶ä¼šç¢°åˆ°æˆ‘ä»¬æ¯” TypeScript æ›´æ¸…æ¥šå®é™…ç±»å‹çš„æƒ…å†µï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> <span class="hljs-attr">arrayNumber</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]<br><span class="hljs-keyword">const</span> <span class="hljs-attr">greaterThan2</span>: <span class="hljs-built_in">number</span> = arrayNumber.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">num</span>) =&gt;</span> num &gt; <span class="hljs-number">2</span>) <span class="hljs-comment">// æç¤º ts(2322),æœ‰å¯èƒ½æ˜¯ undefinded æˆ– number</span><br><br><span class="hljs-comment">// åŠ å…¥ç±»å‹æ£€æµ‹</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">arrayNumber</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]<br><span class="hljs-keyword">const</span> <span class="hljs-attr">greaterThan2</span>: <span class="hljs-built_in">number</span> = arrayNumber.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">num</span>) =&gt;</span> num &gt; <span class="hljs-number">2</span>) <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span> <span class="hljs-comment">// ok</span><br></code></pre></div></td></tr></table></figure><h5 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h5><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">let</span> <span class="hljs-attr">str</span>: string = <span class="hljs-string">&quot;æˆ‘æ˜¯string&quot;</span><br><span class="hljs-comment">// ç›¸å½“äºè·³è¿‡ç±»å‹æ£€æµ‹</span><br><span class="hljs-comment">// 01 å°–æ‹¬å·</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: number = &lt;number&gt;str;<br><span class="hljs-comment">// 02 as è¯­æ³•</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: number = str <span class="hljs-keyword">as</span> number;<br></code></pre></div></td></tr></table></figure><h5 id="éç©ºæ–­è¨€"><a href="#éç©ºæ–­è¨€" class="headerlink" title="éç©ºæ–­è¨€"></a>éç©ºæ–­è¨€</h5><p>åœ¨ä¸Šä¸‹æ–‡ä¸­å½“ç±»å‹æ£€æŸ¥å™¨æ— æ³•æ–­å®šç±»å‹æ—¶,å¯ä»¥ä½¿ç”¨ <code>&quot;!&quot;</code>æ–­è¨€æ“ä½œå¯¹è±¡é null æˆ– undefined</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// ç¤ºä¾‹1</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">str</span>: <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span> | string;<br>str.<span class="hljs-title function_">toString</span>() <span class="hljs-comment">// error</span><br>str!.<span class="hljs-title function_">toString</span>() <span class="hljs-comment">// ok</span><br><span class="hljs-comment">// ç¤ºä¾‹2</span><br>type <span class="hljs-title class_">Foo</span> = <span class="hljs-function">() =&gt;</span> number<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">myFun</span>(<span class="hljs-params">foo: Foo || <span class="hljs-literal">undefined</span></span>) &#123;<br>    <span class="hljs-title function_">foo</span>();<span class="hljs-comment">// error</span><br>    foo!(); <span class="hljs-comment">//ok</span><br>&#125;<br></code></pre></div></td></tr></table></figure><h5 id="ç¡®å®šèµ‹å€¼æ–­è¨€"><a href="#ç¡®å®šèµ‹å€¼æ–­è¨€" class="headerlink" title="ç¡®å®šèµ‹å€¼æ–­è¨€"></a>ç¡®å®šèµ‹å€¼æ–­è¨€</h5><p>å…è®¸åœ¨å®ä¾‹å±æ€§å’Œå˜é‡å£°æ˜åé¢æ”¾ç½®ä¸€ä¸ª <code>&quot;!&quot;</code> å·,ä»è€Œå‘Šè¯‰ TypeScript è¯¥å±æ€§ä¼šè¢«æ˜ç¡®åœ°èµ‹å€¼ã€‚ä¸ºäº†æ›´å¥½åœ°ç†è§£å®ƒçš„ä½œç”¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸ªå…·ä½“çš„ä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">let</span> <span class="hljs-attr">x</span>: number;<br><span class="hljs-title function_">initialize</span>();<br><br><span class="hljs-comment">// Variable &#x27;x&#x27; is used before being assigned.(2454) å¾ˆæ˜æ˜¾è¯¥å¼‚å¸¸ä¿¡æ¯æ˜¯è¯´å˜é‡ x åœ¨èµ‹å€¼å‰è¢«ä½¿ç”¨</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span> * x); <span class="hljs-comment">// Error</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">initialize</span>(<span class="hljs-params"></span>) &#123;<br>  x = <span class="hljs-number">10</span>;<br>&#125;<br><br><span class="hljs-comment">// è§£å†³è¯¥é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¡®å®šèµ‹å€¼æ–­è¨€ï¼š</span><br><span class="hljs-keyword">let</span> x!: number;<br><span class="hljs-title function_">initialize</span>();<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span> * x); <span class="hljs-comment">// Ok</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">initialize</span>(<span class="hljs-params"></span>) &#123;<br>  x = <span class="hljs-number">10</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>é€šè¿‡ <code>let x!: number;</code> ç¡®å®šèµ‹å€¼æ–­è¨€ï¼ŒTypeScript ç¼–è¯‘å™¨å°±ä¼šçŸ¥é“è¯¥å±æ€§ä¼šè¢«æ˜ç¡®åœ°èµ‹å€¼ã€‚</p><h4 id="ç±»å‹æ‹“å®½ï¼ˆType-Wideningï¼‰"><a href="#ç±»å‹æ‹“å®½ï¼ˆType-Wideningï¼‰" class="headerlink" title="ç±»å‹æ‹“å®½ï¼ˆType Wideningï¼‰"></a>ç±»å‹æ‹“å®½ï¼ˆType Wideningï¼‰</h4><h4 id="ç±»å‹ç¼©å°ï¼ˆType-Narrowingï¼‰"><a href="#ç±»å‹ç¼©å°ï¼ˆType-Narrowingï¼‰" class="headerlink" title="ç±»å‹ç¼©å°ï¼ˆType Narrowingï¼‰"></a>ç±»å‹ç¼©å°ï¼ˆType Narrowingï¼‰</h4><h3 id="03-ç¼–è¯‘é€‰é¡¹-tsconfig-jsonğŸ’•"><a href="#03-ç¼–è¯‘é€‰é¡¹-tsconfig-jsonğŸ’•" class="headerlink" title="03 ç¼–è¯‘é€‰é¡¹ tsconfig.jsonğŸ’•"></a>03 ç¼–è¯‘é€‰é¡¹ tsconfig.jsonğŸ’•</h3><h4 id="ç¼–è¯‘é€‰é¡¹"><a href="#ç¼–è¯‘é€‰é¡¹" class="headerlink" title="ç¼–è¯‘é€‰é¡¹"></a>ç¼–è¯‘é€‰é¡¹</h4><h5 id="include"><a href="#include" class="headerlink" title="include"></a>include</h5><p>ç¤ºä¾‹ï¼š [path1,path2â€¦]</p><p>ä½œç”¨ï¼šè§„å®šéœ€è¦ç¼–è¯‘çš„è·¯å¾„</p><h5 id="exclude"><a href="#exclude" class="headerlink" title="exclude"></a>exclude</h5><p>ç¤ºä¾‹ï¼š [path1,path2â€¦]</p><p>ä½œç”¨ï¼šæ’é™¤è§„å®šä¸éœ€è¦ç¼–è¯‘çš„è·¯å¾„</p><h5 id="compilerOptions"><a href="#compilerOptions" class="headerlink" title="compilerOptions"></a><a href="https://www.tslang.cn/docs/handbook/compiler-options.html">compilerOptions</a></h5><p>å¸¸è§çš„ç¼–è¯‘é€‰é¡¹ï¼š</p><table><thead><tr><th>é€‰é¡¹</th><th>ç±»å‹</th><th>é»˜è®¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>target</td><td>string</td><td>â€œES3â€</td><td>æŒ‡å®š<code>ECMAScript</code>ç›®æ ‡ç‰ˆæœ¬</td></tr><tr><td>module</td><td>string</td><td>target === â€œES6â€ ? â€œES6â€ : â€œcommonjsâ€</td><td>æŒ‡å®šç”Ÿæˆå“ªä¸ªæ¨¡å—ç³»ç»Ÿä»£ç </td></tr><tr><td>lib</td><td>string[]</td><td></td><td>ç¼–è¯‘è¿‡ç¨‹ä¸­éœ€è¦å¼•å…¥çš„åº“æ–‡ä»¶çš„åˆ—è¡¨ã€‚</td></tr><tr><td>outDir</td><td>string</td><td></td><td>é‡å®šå‘è¾“å‡ºç›®å½•ã€‚</td></tr><tr><td>outFile</td><td>string</td><td></td><td>å°†è¾“å‡ºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶ã€‚</td></tr><tr><td>removeComments</td><td>boolean</td><td>false</td><td>ç¼–è¯‘åç§»é™¤æ³¨é‡Š</td></tr><tr><td>allowJs</td><td>boolean</td><td>false</td><td>æ˜¯å¦ç¼–è¯‘ js æ–‡ä»¶</td></tr><tr><td>checkJs</td><td>boolean</td><td>false</td><td>åœ¨ <code>.js</code>æ–‡ä»¶ä¸­æŠ¥å‘Šé”™è¯¯ã€‚ä¸ <code>--allowJs</code>é…åˆä½¿ç”¨ã€‚</td></tr><tr><td>noEmitOnError</td><td>boolean</td><td>false</td><td>ç¼–è¯‘ï¼Œä½†ä¸ç”Ÿæˆç¼–è¯‘åçš„æ–‡ä»¶</td></tr><tr><td>noEmitOnError</td><td>boolean</td><td>false</td><td>æŠ¥é”™æ—¶ä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶</td></tr><tr><td>alwaysStrict</td><td>boolean</td><td>false</td><td>ä»¥ä¸¥æ ¼æ¨¡å¼è§£æå¹¶ä¸ºæ¯ä¸ªæºæ–‡ä»¶ç”Ÿæˆ <code>&quot;use strict&quot;</code>è¯­å¥</td></tr><tr><td>noImplicitAny</td><td>boolean</td><td>false</td><td>åœ¨è¡¨è¾¾å¼å’Œå£°æ˜ä¸Šæœ‰éšå«çš„ <code>any</code>ç±»å‹æ—¶æŠ¥é”™ã€‚</td></tr></tbody></table><h3 id="03-ä½¿ç”¨-webpack-æ‰“åŒ…-ts-ä»£ç -ğŸ“¦"><a href="#03-ä½¿ç”¨-webpack-æ‰“åŒ…-ts-ä»£ç -ğŸ“¦" class="headerlink" title="03 ä½¿ç”¨ webpack æ‰“åŒ… ts ä»£ç  ğŸ“¦"></a>03 ä½¿ç”¨ webpack æ‰“åŒ… ts ä»£ç  ğŸ“¦</h3><h4 id="webpack-é…ç½®"><a href="#webpack-é…ç½®" class="headerlink" title="webpack é…ç½®"></a>webpack é…ç½®</h4><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>)<br><span class="hljs-comment">// HTMLæ¨¡æ¿, è‡ªåŠ¨å°†æ‰“åŒ…å¥½çš„æ¨¡å—å¾—å¼•å…¥åˆ° htmlå†…</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">HtmlWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;html-webpack-plugin&#x27;</span>)<br><span class="hljs-comment">// è‡ªåŠ¨æ¸…ç† dist æ–‡ä»¶ç›®å½•ä¸‹çš„è€æ–‡ä»¶</span><br><span class="hljs-keyword">const</span> &#123; <span class="hljs-title class_">CleanWebpackPlugin</span> &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;clean-webpack-plugin&#x27;</span>)<br><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-comment">// å¼€å‘æ¨¡å¼ä¸‹</span><br>  <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span>,<br>  <span class="hljs-comment">// å…¥å£</span><br>  <span class="hljs-attr">entry</span>: <span class="hljs-string">&#x27;./src/index.ts&#x27;</span>,<br>  <span class="hljs-comment">// å‡ºå£</span><br>  <span class="hljs-attr">output</span>: &#123;<br>    <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;bundle.js&#x27;</span>,<br>    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&#x27;dist&#x27;</span>),<br>    <span class="hljs-attr">environment</span>: &#123;<br>      <span class="hljs-comment">// ç”¨äºå…¼å®¹ IE æµè§ˆå™¨</span><br>      <span class="hljs-attr">arrowFunction</span>: <span class="hljs-literal">false</span>,<br>    &#125;,<br>  &#125;,<br>  <span class="hljs-comment">// æ¨¡å—</span><br>  <span class="hljs-attr">module</span>: &#123;<br>    <span class="hljs-attr">rules</span>: [<br>      <span class="hljs-comment">// ç”¨äºè§£æ ts æ–‡ä»¶æ ¼å¼è§„åˆ™</span><br>      &#123;<br>        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.ts$/</span>,<br>        <span class="hljs-attr">use</span>: [<br>          <span class="hljs-comment">// é…ç½® Babel</span><br>          &#123;<br>            <span class="hljs-comment">// loder</span><br>            <span class="hljs-attr">loader</span>: <span class="hljs-string">&#x27;babel-loader&#x27;</span>,<br>            <span class="hljs-comment">// è®¾ç½® babel</span><br>            <span class="hljs-attr">options</span>: &#123;<br>              <span class="hljs-comment">// è®¾ç½®é¢„å®šä¹‰å¾—ç¯å¢ƒ</span><br>              <span class="hljs-attr">presets</span>: [<br>                [<br>                  <span class="hljs-comment">// æŒ‡å®šç¯å¢ƒå¾—æ’ä»¶</span><br>                  <span class="hljs-string">&#x27;@babel/preset-env&#x27;</span>,<br>                  <span class="hljs-comment">// é…ç½®ä¿¡æ¯</span><br>                  &#123;<br>                    <span class="hljs-comment">// éœ€è¦å…¼å®¹ç›®æ ‡æµè§ˆå™¨</span><br>                    <span class="hljs-attr">targets</span>: &#123;<br>                      <span class="hljs-attr">ie</span>: <span class="hljs-number">11</span>,<br>                    &#125;,<br>                    <span class="hljs-comment">// æŒ‡å®šcore.jsçš„ç‰ˆæœ¬</span><br>                    <span class="hljs-attr">corejs</span>: <span class="hljs-string">&#x27;3&#x27;</span>,<br>                    <span class="hljs-comment">// ä½¿ç”¨corejsæ–¹å¼ &quot;usage&quot;,è¡¨ç¤ºæŒ‰éœ€åŠ è½½</span><br>                    <span class="hljs-attr">useBuiltIns</span>: <span class="hljs-string">&#x27;usage&#x27;</span>,<br>                  &#125;,<br>                ],<br>              ],<br>            &#125;,<br>          &#125;,<br>          <span class="hljs-string">&#x27;ts-loader&#x27;</span>,<br>        ],<br>        <span class="hljs-comment">// æ’é™¤çš„æ–‡ä»¶</span><br>        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,<br>      &#125;,<br>    ],<br>  &#125;,<br><br>  <span class="hljs-comment">// é…ç½® Webpack æ’ä»¶</span><br>  <span class="hljs-attr">plugins</span>: [<br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">CleanWebpackPlugin</span>(),<br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackPlugin</span>((options = &#123; <span class="hljs-attr">template</span>: <span class="hljs-string">&#x27;./src/index.html&#x27;</span> &#125;)),<br>  ],<br><br>  <span class="hljs-comment">// é…ç½® webpack-dev-server</span><br>  <span class="hljs-attr">devServer</span>: &#123;<br>    <span class="hljs-attr">static</span>: &#123;<br>      <span class="hljs-attr">directory</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&#x27;public&#x27;</span>),<br>    &#125;,<br>    <span class="hljs-attr">port</span>: <span class="hljs-number">8081</span>,<br>  &#125;,<br><br>  <span class="hljs-comment">// ç”¨æ¥è®¾ç½®å¼•ç”¨æ¨¡å—</span><br>  <span class="hljs-attr">resolve</span>: &#123;<br>    <span class="hljs-comment">// æ‰©å±• ts å¯ä»¥ä½¿ç”¨æ¨¡å—</span><br>    <span class="hljs-attr">extensions</span>: [<span class="hljs-string">&#x27;.ts&#x27;</span>, <span class="hljs-string">&#x27;.js&#x27;</span>],<br>  &#125;,<br>&#125;<br></code></pre></div></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>TypeScript</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaScript</tag>
      
      <tag>TypeScript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é…ç½® Gitlab, Github, Gitee çš„ç¯å¢ƒ</title>
    <link href="/2022/02/15/%E9%85%8D%E7%BD%AE%20Gitlab,%20Github,%20Gitee%20%E7%9A%84%E7%8E%AF%E5%A2%83/"/>
    <url>/2022/02/15/%E9%85%8D%E7%BD%AE%20Gitlab,%20Github,%20Gitee%20%E7%9A%84%E7%8E%AF%E5%A2%83/</url>
    
    <content type="html"><![CDATA[<h2 id="é…ç½®-Gitlab-Github-Gitee-çš„ç¯å¢ƒ"><a href="#é…ç½®-Gitlab-Github-Gitee-çš„ç¯å¢ƒ" class="headerlink" title="é…ç½® Gitlab, Github, Gitee çš„ç¯å¢ƒ"></a>é…ç½® Gitlab, Github, Gitee çš„ç¯å¢ƒ</h2><h3 id="01-é—®é¢˜æè¿°ï¼š"><a href="#01-é—®é¢˜æè¿°ï¼š" class="headerlink" title="01 é—®é¢˜æè¿°ï¼š"></a>01 é—®é¢˜æè¿°ï¼š</h3><p>ä½¿ç”¨ Hexo æ­å»ºæ’­å®¢ï¼Œé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼ŒGithub å’Œ Gitlab çš„ç”¨æˆ·åå’Œé‚®ç®±éƒ½ä¸ä¸€æ ·ï¼Œæ‰€ä»¥æ¯æ¬¡ä»£ç  push,é‚®ç®±å’Œç”¨æˆ·åéƒ½å¾—æ”¹äº†æ”¹å»ã€‚å› æ­¤å°±éœ€è¦é…ç½®ä¸‰è€…å…±å­˜çš„ Git ç¯å¢ƒã€‚</p><h3 id="02-è§£å†³é—®é¢˜ï¼š"><a href="#02-è§£å†³é—®é¢˜ï¼š" class="headerlink" title="02 è§£å†³é—®é¢˜ï¼š"></a>02 è§£å†³é—®é¢˜ï¼š</h3><p>ä¸‹é¢è¿™ä¸ªé“¾æ¥æ˜¯æˆ‘åœ¨ç½‘ä¸Šæ‰¾åˆ°çš„ä¸é”™çš„è§£å†³æ–¹æ¡ˆã€‚</p><p><a href="https://www.cnblogs.com/tooyi/p/13677190.html">é…ç½® github å’Œ gitee(ç äº‘)çš„ Git ç¯å¢ƒ</a></p><h3 id="03-è¡¥å……-config-æ–‡ä»¶å¸¸è§é…ç½®é¡¹ï¼š"><a href="#03-è¡¥å……-config-æ–‡ä»¶å¸¸è§é…ç½®é¡¹ï¼š" class="headerlink" title="03 è¡¥å…… config æ–‡ä»¶å¸¸è§é…ç½®é¡¹ï¼š"></a>03 è¡¥å…… config æ–‡ä»¶å¸¸è§é…ç½®é¡¹ï¼š</h3><figure class="highlight ini"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs ini"><span class="hljs-comment">#é…ç½®ç¤ºä¾‹</span><br><span class="hljs-comment">#Host åé¢æ˜¯åˆ«å</span><br><span class="hljs-comment">#HostName ä¸ºIP</span><br><span class="hljs-comment">#Portä¸ºç«¯å£</span><br><span class="hljs-comment">#Userä¸ºç”¨æˆ·å</span><br><span class="hljs-comment">#IdentityFileä¸ºè‡ªå·±IDç§é’¥</span><br><span class="hljs-comment">#PreferredAuthentications publickey  # é¦–é€‰è®¤è¯æ–¹å¼</span><br></code></pre></div></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><blockquote><p>aa å…¬å¸</p><p>gitlab åœ°å€ï¼šhttp:// xx.xx.xx.xx</p><p>email: <a href="mailto:&#x78;&#105;&#97;&#111;&#x6d;&#x69;&#x6e;&#x67;&#x40;&#x61;&#x61;&#x2e;&#x63;&#111;&#x6d;">&#x78;&#105;&#97;&#111;&#x6d;&#x69;&#x6e;&#x67;&#x40;&#x61;&#x61;&#x2e;&#x63;&#111;&#x6d;</a></p><p>name: xiaoming</p></blockquote><figure class="highlight ini"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs ini"><span class="hljs-comment">#gitLab</span><br>Host xx.xx.xx.xx<br>HostName xx.xx.xx.xx<br>User xiaoming<br>    IdentityFile ~/.ssh/id_rsa.gitlab<br>    PreferredAuthentications publickey<br></code></pre></div></td></tr></table></figure><p>æµ‹è¯•ä¸€ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">$ ssh -T git@xx.xx.xx.xx<br>// OK: Welcome to GitLab, @xiaoming!<br></code></pre></div></td></tr></table></figure><p>ç»“å°¾ï¼š</p><p>åœ¨é¡¹ç›® git ä»“åº“ä¸‹,å®šä¹‰è‡ªå·±çš„ <code>ç”¨æˆ·å</code> å’Œ <code>email</code></p><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">$ git config --<span class="hljs-built_in">local</span> user.name <span class="hljs-string">&quot;xiaoming&quot;</span><br><br>$ git config --<span class="hljs-built_in">local</span> user.email <span class="hljs-string">&quot;xiaoming@aa.com&quot;</span><br></code></pre></div></td></tr></table></figure><p>æœ€åå°±å¯ä»¥æ„‰å¿«æäº¤ä»£ç äº†â€¦</p>]]></content>
    
    
    <categories>
      
      <category>Windows</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>ssh</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
